第四章

![image](images/frontdot.jpg)

局部特征设计概念、分类和学习

科学，我的孩子，是由错误组成的，但这些错误是有益的，因为它们会一点一点地通向真理

*—儒勒·凡尔纳，*地心之旅

在这一章中，我们研究了与局部特征描述符设计相关的几个概念，即局部模式、形状、光谱、距离函数、分类、匹配和对象识别。主要焦点是*局部特征度量，*如图[图 4-1](#Fig1) 所示。本讨论遵循将在[第 5 章](05.html)中介绍的一般视觉分类法，包括理解兴趣点检测器和特征描述符的关键基础，如将在[第 6 章](06.html)中调查的，包括检测器和描述符方法共有的选定概念。请注意，修改以及混合和匹配检测器和描述符以获得最佳结果的机会总是存在的。

![9781430259299_Fig04-01.jpg](images/9781430259299_Fig04-01.jpg)

[图 4-1](#_Fig1) 。愿景流水线中的各个阶段；本章将关注局部特征度量和分类及学习

地方特色

我们关注于*局部特征描述符*的设计，以及它们如何用于训练、分类和机器学习。讨论遵循[第 5 章](05.html)中提出的特征分类法，如图[图 5-1](05.html#Fig1) 所示。主要元素有:(1) *形状*(例如长方形或圆形)；(2) *模式*(密集采样或稀疏采样)；以及(3) *光谱*(二进制值、标量、稀疏码或其他值)。密集模式特征将使用局部区域中的每个像素，例如矩形中的每个像素，而稀疏特征将仅使用该区域中的选定像素。

除了形状和图案的许多方法之外，还有许多用于光谱的方法，从基于梯度的补丁方法到稀疏局部二进制图案方法。这里涉及的主要主题包括:

*   **探测器**，用于定位图像中感兴趣的特征。
*   **描述符**，用于描述感兴趣特征周围的区域。
*   **描述符属性**，如特征鲁棒性和不变性。
*   **分类**，用于创建特征和最佳特征匹配的数据库。
*   **识别**，用于将目标图像中检测到的特征与训练好的特征进行匹配。
*   **特征学习**，或机器学习方法。

基于本章介绍的概念，[第 5 章](05.html)中提供的视觉分类法提供了一种总结和分析特征描述符及其属性的方法，从而能够在不同方法之间进行有限的比较。

检测器、兴趣点、关键点、锚点、地标

一个*探测器* 在图像中发现有趣的特征。文献中讨论“感兴趣的特征”的术语包括几个可互换的术语，如*关键点*、*界标、兴趣点、*或*锚点*，所有这些术语都是指诸如角点、边缘或图案之类的能够以高可能性重复发现的特征。在第 6 章的[中，我们将探讨许多探测器方法，以及各种设计方法。在某些情况下，关键点检测器用于确定周围特征描述符的方向向量，例如，通过计算拐角的整体梯度方向。不确定或低质量的关键点通常在特征描述之前被过滤掉。注意，许多关键点方法在较小的像素区域上操作，例如 LBP 的 3x3 和 FAST 的 7x7。](06.html)

关键点位置本身可能不足以进行特征匹配；然而，这里讨论的一些方法仅依赖于*关键点，*没有特征描述符。特征描述提供了关于每个关键点的更多信息，并且可以在更大的区域和多个尺度上计算，例如 SIFT 和 ORB。

描述符、特征描述、特征提取

可以在每个关键点计算特征*描述符*T2，以提供关于关键点周围像素区域的更多信息。然而，在跨固定大小像素网格计算特征的方法中，例如 Viola Jones 方法[146]，不需要兴趣点，因为网格定义了描述符区域。特征描述通常使用颜色或灰度强度通道的某种组合，以及诸如梯度和颜色的局部信息。特征描述发生在形状上，例如正方形或圆形。在某些情况下，像素点对样本模式用于计算或比较选定的像素值，以产生一个*描述符向量——例如*，如稍后在[图 4-8](#Fig8) 中所示。

通常，兴趣点提供一定程度的不变性和鲁棒性，例如，在缩放和旋转方面。在许多情况下，描述符的方向是从兴趣点确定的，并且描述符提供了其他不变性属性。将兴趣点与描述符相结合提供了更大的不变性属性集。并且如果来自同一对象的几个描述符相关联在一起，则对象识别是可能的。

例如，描述符可以包含在几个强度通道、多个几何尺度和多个视角上计算的多元、多维和多几何量。一个*多元*描述符可以包含 RGBD 数据(红色、绿色、蓝色和 Z 深度数据)；*多维*描述符可以包含图像金字塔中不同缩放级别的特征描述；并且*多几何*描述符可以包含跨局部图像块或区域的仿射变换计算的一组特征描述。

设计功能的方法没有对错之分；采取了许多方法。例如，包括对象的区域形状、区域纹理和区域颜色的一组度量在定位水果的应用中可能是有帮助的，而另一个应用可能不需要颜色或形状，而是可以依赖于兴趣点、特征描述符及其空间关系的集合。事实上，将几个较弱的描述符方法组合成一个多元描述符通常是最好的方法。

从图像中计算特征描述符通常被称为*特征提取*。

稀疏局部模式方法

虽然一些方法在整个图像的规则采样网格内密集地描述特征，例如在第 6 章中讨论的 PHOG [191]方法，但是其他方法，例如 FREAK [130]使用*稀疏局部模式*对锚定在兴趣点的像素进行采样，以创建描述符。根据不同的方法，可以通过设计来训练、学习或选择形状，并且目前使用许多形状和图案的拓扑结构。

为了构建关于稀疏局部模式和描述符方法的讨论，请注意与全局和区域描述符方法的对比，后者通常*而不是*依赖于稀疏局部模式。相反，全局和区域方法通常使用较大形状(如矩形或其他多边形)的密集采样。例如，多边形形状描述符，如将在[第 6 章](06.html)中讨论的，可以使用密集方法(如数学形态学和区域分割)描绘或分割特征区域。在[第 3 章](03.html)中讨论的全局和区域描述符度量，如纹理度量、直方图或 SDM，通常是在内聚的密集区域而不是稀疏区域中计算的。

局部特征属性

这一部分讨论了如何选择特征来提供特征良好性的期望属性，例如不变性和健壮性。

选择特征描述符和兴趣点

必须选择兴趣点检测器和特征描述方法 一起工作，并且对于正在处理的图像类型工作良好。对于检测器和描述符对，必须考虑鲁棒性属性，例如对比度、比例和旋转。如[附录 A](09.html) 所示，每个兴趣点检测器都是为寻找特定类型的特征而设计的，因此没有一种方法适用于所有类型的图像。

例如，FAST 和 Harris 方法通常找到许多小的*单尺度*兴趣点，而其他方法，如 SIFT 中使用的方法，找到更少、更大和微调的*多尺度*兴趣点。期望对感兴趣点检测器参数进行一些调整，以便使它们能够工作，或者可能需要对图像进行一些预处理，以帮助检测器首先找到感兴趣点。([第 6 章](06.html)提供了兴趣点方法和背景数学概念的概述。)

特征描述符和特征匹配

特征描述是*特征匹配* 的基础，导致图像理解、场景分析和物体跟踪。特征匹配中的中心问题包括如何确定一个特征是否与其他相似特征相区别，以及该特征是否是更大对象的一部分。

由于许多原因，确定特征匹配的方法是关键的；这些原因包括计算成本、内存大小、可重复性、准确性和鲁棒性。虽然完美匹配是理想的，但在实践中，相对匹配是由*距离函数*确定的，其中输入的特征描述符集与已知的特征描述符进行比较。但是我们将在本章后面讨论几个距离函数。

善良的标准

可以一次对一个属性进行测量。稍后在[表 4-2](#Tab2) 中提供了特征地标的良好属性的一般列表。请注意，这个列表主要是关于不变性和健壮性:这些是关键概念，因为性能可以使用各种优化方法来调整，正如将在[第 8 章](08.html)中讨论的。当然，在一个给定的应用中，善良的一些属性比其他的更重要；这将在第 7 章的[中结合地面真实数据进行讨论。](07.html)

我们如何知道一个特性对于应用程序来说是好的呢？我们可以将讨论分为兴趣点方法和描述符方法，以及两者提供的组合鲁棒性和不变性属性(见[表 4-1](#Tab1) )。特征锚定的兴趣点至关重要，因为如果锚定不好且无法轻松重复地找到，则生成的描述符将在次优位置计算。

[表 4-1](#_Tab1) 。好的特征描述符和兴趣点的一些属性。(一般鲁棒性标准参见[图 5-2](05.html#Fig2) )

| 

*良好的*特性度量属性

 | 

细节

 |
| --- | --- |
| 比例不变性 | 应该能够找到不同比例的特征 |
| 透视不变性 | 应该能够从视野中的不同角度找到特征 |
| 旋转不变性 | 该特征应该在图像平面内的各种旋转中被识别 |
| 翻译不变性 | 这一特征应该在 FOV 的不同位置得到承认 |
| 反射不变性 | 该特征应该被认为是其自身的镜像 |
| 仿射不变性 | 该特征应该在仿射变换下被识别 |
| 噪声不变性 | 该特征在存在噪声的情况下应该是可检测的 |
| 光照不变性 | 该特征在包括亮度和对比度变化在内的各种照明条件下应该是可识别的 |
| 计算效率 | 特征描述符应该能够高效地计算和匹配 |
| 特殊性 | 该特征应该是独特和可检测的，具有低的误匹配概率，适合于从特征数据库中进行匹配 |
| 描述简洁 | 该特征应该不需要大量的存储器来保存细节 |
| 遮挡鲁棒性 | 当部分特征或特征集被遮挡时，可以描述和检测该特征或特征集 |
| 聚焦或模糊鲁棒性 | 可以在不同的聚焦程度下检测特征或特征集(即，图像金字塔可以提供这种能力的一部分) |
| 杂乱和异常鲁棒性 | 可以在存在异常特征和杂乱的情况下检测该特征或特征集 |

请注意，在许多情况下，图像预处理是创建良好特征的关键 ( [图 4-1](#Fig1) )。如果图像数据存在可以纠正或改进的问题，则应在图像预处理之后进行特征描述。请注意，许多特征描述方法依赖于描述符创建期间的局部图像增强，例如关键点周围区域的高斯模糊以消除噪声，因此图像预处理应该补充描述符方法。每种预处理方法都有缺点和优点；图像预处理信息参见[表 2-1](02.html#Tab1) 和[第 2 章](02.html)。

![9781430259299_Fig04-02.jpg](images/9781430259299_Fig04-02.jpg)

图 4-2。(左)在原始图像上计算的 SURF 特征描述符。(右)在特征提取之前，已经使用直方图均衡化对图像进行了预处理，因此发现了一组不同但重叠的特征

可重复性，容易还是难发现

理想情况下，该特征在图像中容易找到，这意味着该特征描述包含足够的信息，在各种条件下(如[表 4-1](#Tab1) 所示)都是鲁棒的，例如对比度和亮度变化、比例和旋转。*重复性*特别适用于兴趣点检测，因此兴趣点检测器方法的选择至关重要。([附录 A](09.html) 包含显示几种常见兴趣点检测器有趣的不可重复异常的示例图像。)

一些描述符，如 SIFT [161，178]，已知在许多成像条件下是鲁棒的。这并不令人惊讶，因为 SIFT 被设计为在多个维度上进行区分，例如尺度和旋转，使用精心组成的局部区域梯度集，并应用加权因子来增加靠近特征中心的梯度的重要性。但是鲁棒性和可重复性是以计算成本为代价的。SIFT [161，178]是计算量最大的方法之一；然而，[第 6 章](06.html)调查了各种 SIFT 优化和变化。

明显与不明显

描述符在以下情况下是独特的:

*   该特征可以与图像的其他类似特征区域相区别。
*   不同的特征向量在特征集中是唯一的。
*   使用合适的距离函数可以有效地匹配该特征。

如果不能区分相似的特征，则特征是模糊的；这可能是由于缺少合适的图像预处理、描述符中的信息不足或者为匹配阶段选择的距离函数不合适造成的。当然，将信息添加到更简单的描述符中以使描述符成为混合多元或多尺度描述符可能是提高独特性所需要的全部。例如，可以添加颜色信息来区分肤色。

相对和绝对位置

位置信息(如坐标)对于要素的良好性至关重要。例如，为了使用对人眼的角位置的约束将特征关联在一起，需要兴趣点坐标。作为智能匹配过程的一部分，通过使用眼角位置之间的距离和角度，这些能够更准确地识别和定位眼睛。

随着深度传感器的使用越来越多，简单地在描述符本身中提供特征的 Z 或深度位置可能足以容易地将特征与背景区分开。深度场中的位置是一种强有力的信息，并且由于计算机视觉通常涉及在 2D 图像场中寻找 3D 信息，因此 Z 深度信息可以是特征良好性的无价属性。

匹配成本和对应关系

特征匹配是使用*距离函数(本节接下来讨论的*)测量两个或多个特征之间的对应性。请注意，特征匹配在内存和计算时间方面是有代价的。例如，如果特征描述符由 8 位字节的数组组成，例如 18×18 像素相关模板，则特征匹配成本是将两个 18×18(324)像素区域相互比较所需的计算时间和存储器，其中使用的匹配方法或距离函数可以是 SAD、SSD 或类似的差异度量。另一个例子涉及本地二进制描述符，例如 LBP(线性二进制模式)，其被存储为比特向量，其中匹配成本是执行汉明距离函数的时间，汉明距离函数通过布尔 XOR 比较两个二进制向量来操作，随后是比特计数以提供匹配度量。

通常，距离函数是应用于计算机视觉的众所周知的数学函数；然而，就可计算性和对特定视觉任务的应用而言，一些比另一些更适合。例如，SSD、SAD、余弦距离和汉明距离度量由于其广泛的适用性，已经在一些架构中作为计算机机器语言指令在硅中实现。因此，选择一个在硅中加速的距离函数可能是一个优势。

特征数据库是匹配成本的另一个组成部分，因此数据库的组织和特征搜索对成本有贡献。我们将在本章后面简要地谈到这个话题。

距离函数

本节提供了用于聚类、分类和特征匹配的距离函数的一般讨论。注意，距离函数可以在几个维度上取值，例如，用于特征描述符匹配的 2D 图像阵列，用于点云匹配的 3D 体素体积，以及用于多元描述符的多维空间。由于这是一个简短的概述，Pele[548]提供了更深入的治疗。

注意，本章后面讨论的核机器[361，362]提供了一个自动框架来分类特征空间和替换选择的距离函数核。

距离函数的早期工作

1968 年，Rosenfeld 和 Pfaltz[121]开发了确定图像特征之间距离的新方法，他们称之为“图片的给定子集”，其中他们工作中使用的特征形状包括菱形、正方形和三角形。他们研究的距离度量包括一些今天不再常用的方法:

*   离单点的六边形距离(笛卡尔阵列)
*   单点的六边形距离(交错阵列)
*   离单点的八边形距离
*   城市街区与空白区域的距离
*   空白区域的平方距离
*   距离空白区域的六边形距离
*   离空白区域的八角形距离
*   从一个点到欧几里得距离的最近整数

Rosenfeld 和 Pfaltz 的这项早期工作非常有趣，因为用于渲染图像的输出设备是打印在 CRT 终端或行式打印机上的 ASCII 字符，如图 4-3 所示。

![9781430259299_Fig04-03.jpg](images/9781430259299_Fig04-03.jpg)

[图 4-3](#_Fig3) 。Rosenfeld 和 Pfaltz 的早期渲染图，使用行式打印机作为输出设备来说明距离函数(在本例中为平方距离)。(图片转载自 Rosenfeld 和 Pfaltz，《模式识别》(牛津:佩加蒙出版社，1968)，1:33-61。经爱思唯尔许可使用)

欧几里德或笛卡尔距离度量

欧几里德距离度量包括笛卡尔坐标空间中的基本欧几里德几何恒等式；总的来说，这些都是简单明了的用法。

欧几里德距离

这是两点之间的简单距离。

![image](images/Eqn4-01.jpg)

![9781430259299_unFig04-01.jpg](images/9781430259299_unFig04-01.jpg)

平方欧几里德距离

这样计算速度更快，并且省略了平方根。

![image](images/Eqn4-02.jpg)

**余弦距离或相似度**

这是角距离，或两个向量之间的归一化点积，以产生向量角度的相似性；也适用于 3D 曲面法线和视点匹配。

![image](images/Eqn4-03.jpg)

![image](images/Eqn4-04.jpg)

![9781430259299_unFig04-02.jpg](images/9781430259299_unFig04-02.jpg)

绝对差值之和(SAD ) 或 L1 常模

矢量元素之间的差被求和，并作为矢量之间的总距离。注意 SAD 相当于曼哈顿距离。

![image](images/Eqn4-05.jpg)

平方差和(SSD) 或 L2 范数

向量元素之间的差被求和并被平方，并被取为向量之间的总距离；通常用于运动估计的视频解码。

![image](images/Eqn4-06.jpg)

相关距离

这是两个向量之间的相关差系数，类似于余弦距离。

![image](images/Eqn4-07.jpg)

![image](images/Eqn4-08.jpg)

更长的距离

欧几里得距离的有效替代，为直方图类型的距离度量产生更好的性能和准确性，如 SIFT 的 rootsif[178]优化中所报告的。对于 L1 归一化直方图矢量，海灵格距离被定义为:

![image](images/Eqn4-09.jpg)

网格距离度量

这些度量类似于网格上的路径来计算距离。因此，距离是以网格步长测量的。

曼哈顿距离

也称为城市街区差异或直线距离，它通过沿着网格的路径来测量距离；沿着一个网格可能有多条距离相等的路径。

![image](images/Eqn4-10.jpg)

![9781430259299_unFig04-03.jpg](images/9781430259299_unFig04-03.jpg)

切比雪夫距离

也称为棋盘差异，这是测量两个向量之间沿网格的最大差异。请注意，在下图中，三角形的每条边的切比雪夫距离或长度为 5，但在欧几里得空间中，其中一条直线(斜边)比其他直线都长。

![image](images/Eqn4-11.jpg)

![9781430259299_unFig04-04.jpg](images/9781430259299_unFig04-04.jpg)

统计差异度量

这些度量基于向量的统计特征，因此距离度量不需要映射到欧几里得空间。

运土车距离或 或

土方距离测量将多维向量(如直方图)转换为另一个向量的成本。这类似于一台推土机(推土机)在两组堆之间移动泥土，使每组中的泥土堆大小相同。EMD 假设矢量中的要素之间存在地面距离，例如直方图中条柱之间的距离。EMD 被计算为变换的最小成本，其整合了移动的距离 *d* *移动的量 *f* ，服从一些约束【130】。

![image](images/Eqn4-12.jpg)

一旦计算出成本，结果就被标准化了。

![image](images/Eqn4-13.jpg)

EMD 具有高计算成本，且可用于图像分析，但是 EMD 不是用于特征匹配的有效度量。

马氏距离

也称为二次距离，它使用均值和协方差计算距离；它是比例不变的。

![image](images/Eqn4-14.jpg)

![image](images/Eqn4-15.jpg)

其中![image](images/Eqn4-16.jpg) =特征向量 1 的平均值，![image](images/Eqn4-17.jpg) =特征向量 2 的平均值。

布雷柯蒂斯距离

这相当于绝对差之和与和之比，例如曼哈顿距离的范数之比。Bray Curtis 相异度有时用于聚类数据。

![image](images/Eqn4-18.jpg)

堪培拉距离

它测量两个等长向量之间的距离:

![image](images/Eqn4-19.jpg)

二进制或布尔距离度量

这些度量依赖于集合比较和布尔代数概念，这使得该度量族对于数字计算机上的优化很有吸引力。

l0 定额

L0 范数是向量中非零元素的计数，用于汉明距离度量和其他二进制或布尔度量。

![image](images/Eqn4-20.jpg)

汉明距离

这测量相等长度的向量之间的二进制差异或一致性，例如，字符串或二进制向量。二进制位向量的汉明距离可以在数字计算机中用完整的机器语言指令或者作为 XOR 运算后跟位计数运算来有效地实现。汉明距离是匹配本地二进制描述符的首选，如 LBP、FREAK、CENSUS、BRISK、BRIEF 和 ORB。

串距:5 = 0001100111 = compare " Hel**lo**Th**ere**和" Hel **ps** Th **ing**

二进制距离:3 = 10100010 =(**0**1**0**011**1**0)异或(**1**1**0**011**0**0)

**(u XOR v)**的位计数

Jaccard 的相似性和不相似性

二元集合(0，1 或真，假)的两两相似性与集合元素个数的比率。下面的集合 1 包含具有与集合 2 相同的成对值的两个比特，因此相似度是 2/5，相异度是 3/5。Jaccard 相似度可以结合汉明距离。

<colgroup><col width="15%"> <col width="35%"> <col width="50%"></colgroup> 
|  | *设置 1:* | {1,0,1,1,0} |
|  | *设置 2:* | {1,1,0,1,1} |
|  | *Jaccard 相似度:* | 2 / 5 = .4 |
|  | **Jaccard 不同点:** | **3 / 5 = .6** |

描述符表示

本节讨论如何在描述符中表示信息，包括对特征描述和匹配有用的坐标空间，并讨论多模态数据和特征金字塔。

坐标空间，复杂空间

计算机视觉中使用的坐标系有很多，因此能够在坐标系之间转换数据是很有价值的。坐标空间类似于基空间。通常，选择正确的坐标系有利于特征表示、计算或匹配。复杂空间可以包括标量和矢量变量的多元集合，例如像素区域的梯度、颜色、二进制模式和统计矩。参见图 4-4 。

![9781430259299_Fig04-04.jpg](images/9781430259299_Fig04-04.jpg)

[图 4-4](#_Fig4) 。坐标空间，笛卡尔空间、极坐标空间、径向空间和球面空间

**笛卡尔坐标**

图像通常是在笛卡尔空间的时域中捕获的，并且对于许多应用来说，需要转换到其他坐标空间。人类视觉系统将世界视为复杂的 3D 球面坐标空间，人类可以通过一个小小的奇迹，将 3D 空间映射到近似或相对的笛卡尔坐标中。计算机成像系统捕捉数据并将其转换为笛卡尔坐标，但深度感知和几何精度在转换中丢失。([第 1 章](01.html)讨论了深度传感方法和 3D 成像系统，包括几何因素。)

极坐标和对数极坐标

第 6 章稍后提到的许多描述符使用圆形描述符区域来匹配人类视觉系统。因此，极坐标是组合特征向量的逻辑候选者。例如，GLOH [144]方法对直方图梯度宁滨使用极坐标，而不是原始 SIFT [161]方法中使用的笛卡尔坐标。GLOH 可以用作 SIFT 的改型，并已证明可以提高准确性[144]。由于圆形采样模式往往提供更好的旋转不变性，极坐标和圆形采样是描述符设计的良好匹配。

径向坐标

RIFF 描述符(稍后在第 6 章的[中描述)使用局部径向坐标系来描述旋转不变的基于梯度的特征描述符。径向坐标系基于径向梯度变换(RGT ),该变换对不变宁滨的矢量进行归一化。](06.html)

如图[图 4-4](#Fig4) 和图 6-27 所示，RGT 在面片区域 *c，*内建立一个局部坐标系，并建立相对于面片上任意一点 *p* 的两个正交基向量( *r，t* )，径向向量为 *r* ，切向向量为 *t* 。在所有点 *p* 处测量的梯度 *g* 被投影到径向坐标系( *r，t* )上，使得梯度以相对于小块中心的兴趣点 *c* 局部不变的方式被表示。当面片围绕 c 旋转时，梯度也旋转，不变表示保持不变。

球面坐标

球面坐标，也称为 3D 极坐标，可以应用于 3D 成像和深度感测领域，以增加描述和分析的准确性。例如，今天的深度相机通常只为每个样本提供( *x，y)* 和 *Z* 深度信息。然而，遗憾的是，这不足以描述空间的复杂几何形状，包括翘曲、径向扭曲和样本之间的非线性距离。[第 1 章](01.html)讨论了 3D 空间、深度测量和坐标系统的复杂性。

仪表坐标

G-SURF 方法[188]使用局部区域规范坐标系的微分几何概念[190]来计算特征。仪表坐标对于图像特征是局部的，并且它们具有几何精度的优势。规范导数是旋转和平移不变的。

多元空间，多模态数据

多元空间结合了几个量，比如结合了标量和向量值的张量空间，常用于计算机视觉。虽然原始图像数据可能只是标量值，但是许多特征描述符计算每个像素的局部梯度，因此像素标量值和梯度向量的组合形成了张量或多元空间。例如，色彩空间(参见[第 2 章](02.html))可以将色彩表示为一组标量和矢量，例如[图 2-9](02.html#Fig9) 中所示的色调、饱和度和值(HSV)色彩空间，其中矢量包括 ***HS*** ，其中 ***H*** 色调作为矢量角度， ***S*** 饱和度作为矢量幅度。 ***V*** 是另一个有两个用途的矢量，首先作为轴原点的 ***HS*** 矢量，其次作为颜色强度或灰度矢量 ***V*** 。为了便于分析，将原始的 *RGB* 数据转换到这样的颜色空间通常是有用的，例如，能够统一地改变所有颜色的颜色强度，从而影响亮度或对比度。

一般来说，通过增加特征空间的维度，可以增加更多的区分度和鲁棒性。例如，稍后在第 6 章中描述的 LBP 模式可以通过添加旋转不变表示(RILBP)等特征扩展成多个变量；或者通过在 *RGB* 彩色通道上复制 LBP，如彩色 LBP 描述符中所示；或者通过将 LBP 模式扩展到时空 3-空间，像 LBP-TOP 那样增加几何失真不变性。

随着内置 GPS、指南针、温度、高度计、惯性和其他传感器的移动设备的激增，多模式传感器数据变得越来越普遍。多模态、多变量描述符的一个例子是 SIFT-GAFD [245]方法，如图 4-5 中的[所示，它以重力矢量的形式将加速度计信息添加到 SIFT 描述符中。重力矢量称为*全局方向*，SIFT 局部像素区域梯度称为*局部方向*。](#Fig5)

![9781430259299_Fig04-05.jpg](images/9781430259299_Fig04-05.jpg)

[图 4-5](#_Fig5) 。在 SIFT-GAFD 方法[245]中使用的特征描述符中，使用重力矢量形式的加速度计数据的多模态描述符。全局定向的重力矢量可以用于相对于环境的特征定向

特征金字塔

许多特征描述符仅使用给定尺度的像素值以单尺度方式计算，然后为了特征检测和匹配，在尺度空间图像金字塔中搜索特征。然而，通过在多个尺度下计算描述符并将多个缩放的描述符一起存储在*特征金字塔*中，可以在具有尺度变化的单尺度图像上检测特征，而无需使用尺度空间金字塔。

对于兴趣点和特征描述符方法，*尺度不变性*可以通过以下方式解决:(1)在搜索之前缩放图像，如在本章稍后讨论的尺度空间金字塔方法中；或者(2)缩放和金字塔化描述符中特征的多个尺度。由于基于形状的方法依赖于更大的多边形结构和形状度量，因此基于形状的方法本质上比兴趣点和特征描述符方法更具有比例不变性。

描述符密度

根据图像数据，会有不同数量的良好兴趣点和特征，因为一些图像具有更明显的纹理。并且取决于所使用的检测器方法，具有高纹理结构或更宽像素强度范围差异的图像将可能比具有低对比度和平滑纹理的图像产生更多的兴趣点。

一个好的经验法则是，图像中 0.1%到 1%的像素可以产生原始的、未经过滤的兴趣点。FAST 和 Harris 探测器系列等更灵敏的探测器位于该范围的高端(参见[附录 A](09.html) )。当然，检测器参数经过调整，可以减少每个应用中不必要的检测。

兴趣点和描述符剔除

事实上，即使兴趣点看起来不错，在兴趣点计算的相应描述符可能不值得使用，并且在某些情况下会被丢弃。兴趣点和描述符都被剔除。因此，一起调整检测器和描述符是关键的试错过程。使用我们产生有效原始兴趣点的 0.1%到 1%像素的基本假设，我们可以根据视频分辨率估计可能检测到的兴趣点，如[表 4-2](#Tab2) 所示。

[表 4-2](#_Tab2) 。每幅图像检测到的兴趣点的可能范围

![image](images/Table4-2.jpg)

根据方法的不同，检测器可以仅在单尺度下运行，或者在图像金字塔尺度空间中的一组尺度图像上运行。对于尺度空间搜索方法，兴趣点检测器在金字塔中每个图像的每个像素上运行。有哪些方法可以用来剔除兴趣点，将兴趣点密度降低到一个可管理的数量？

选择最佳兴趣点的一种方法是使用*自适应探测器调谐方法* (如[第 6 章](06.html)“兴趣点调谐”中所述)。其他方法包括仅选择相距给定阈值距离的兴趣点，例如，一个兴趣点不能与五像素窗口内的另一个兴趣点相邻，最佳候选点在阈值内选择。

另一种方法是改变本章中讨论的搜索策略，例如，在图像金字塔的较低分辨率下搜索特征，识别最佳特征，并记录它们的位置，或者在金字塔的较高层次上搜索以确认特征位置，然后计算描述符。最后一种方法的缺点是默认情况下会丢失精细特征，因为这些特征可能只在全图像分辨率下出现。

另一种方法是每隔一个像素或者在网格大小的区域内寻找兴趣点。以上方法在实践中都有使用，除此之外还有其他方法。

密集与稀疏特征描述

一个*密集*描述符利用了区域或小块中的所有像素。“密集”是指内核采样模式包括所有像素，因为稀疏内核可以选择使用或忽略特定像素。SIFT 和 SURF 是密集描述符的经典示例，因为矩形区域中的所有像素都对描述符计算有贡献。

许多特征描述方法，尤其是局部二进制描述符方法，正在利用*稀疏模式*，其中从一个区域而不是所有像素中选择像素。FREAK 描述符通过模拟人类视觉系统、使用圆形搜索区域、利用更靠近区域中心的更精细分辨率采样，以及调整分辨率增加的局部采样模式的层次结构以获得最佳结果，展示了稀疏采样的最巧妙方法之一。稀疏特征不仅可以潜在地使用更少的内存和减少计算，而且稀疏描述符可以扩展到更广的区域，以补偿较小区域中出现的特征异常。

描述符形状拓扑

对于这一讨论，我们着眼于调查用于描述符计算的像素区域的各种形状来查看描述符形状*拓扑*。拓扑的一部分是形状或边界，另一部分是选择密集还是稀疏采样模式，这将在本章后面讨论。采样和图案化方法的范围从简单的矩形区域到更复杂的稀疏局部二进制描述符图案。正如将在[第 6 章](06.html)中讨论的，2D 和 3D 描述符都被设计成使用广泛的拓扑结构。让我们来看看一些拓扑设计的考虑因素，如面片形状、子面片、条带和可变形面片。

哪种形状比较好？答案是主观的，我们不试图提供绝对的答案，只是提供一个调查。

关联模板

一个明显的形状是相关模板匹配方法通常使用的简单矩形区域。因此，描述符是模板区域中的*面部照片、*或实际图像。要选择矩形内的子空间，可以使用遮罩，例如，它可以是边界矩形内的圆形遮罩，以遮蔽外围像素。

补丁和形状

文献通常将特征形状称为*片*，通常假定为矩形。由于易于编码 2D 阵列存储器访问，补丁形状通常是矩形的。圆形面片广泛应用于局部二进制描述符方法中。

然而，许多描述符也计算多个面片或区域的特征*，而不仅仅是单个面片。以下是补丁拓扑的一些常见变体。*

单个补丁、子补丁

许多描述符将补丁计数限制为单个 2D 补丁。这是第 6 章中调查的大多数常见描述符的真实情况。然而，一些局部二进制描述符在较大块内的特定点处使用一组积分图像*子块*——例如，BRIEF 在较大 31×31 像素块区域内的局部二进制模式中的每个采样点处使用 5×5 积分图像子块，因此每个子块的值成为用于点对比较的值。目标是过滤每个点的值以去除噪声。

可变形贴片

不是使用诸如固定大小的矩形或圆形的刚性形状，而是可以在考虑变形的情况下设计特征描述符，诸如比例变形[345，346]和仿射或单应变形[220]，以实现更鲁棒的匹配。示例包括 DeepFlow [344，394]深度匹配方法和 RFM2.3，这将在第 6 章的[中讨论。此外，使用全连接或稀疏连接拓扑的 D-NETS [135]方法可以被认为在条形图案的放置的不变性方面是可变形的；参见](06.html)[图 4-7](#Fig7) 和[第 6 章](06.html)中 D 网的讨论。本章稍后讨论的许多特征学习方法也使用变形特征进行训练。

固定的描述符形状，例如刚性矩形和圆形，可以在刚性运动假设下检测运动，其中整个描述符预期以一定量的变化移动，例如在缩放或仿射变换中。然而，对于活动识别和运动，需要更可变形的描述符模型，而 DeepFlow [344，394]弥合了描述符匹配方法和光流匹配方法之间的差距，使用可变形面片和沿着深度学习网络的线进行深度匹配。

多补丁集

SIFT 描述符使用从尺度空间金字塔结构中获取的相邻狗图像的三个面片的多面片集合，如[图 6-15](06.html#Fig15) 所示。其他几种方法，如图 6-12 中[所示的 LBP-TOP 和 VLBP，使用跨卷结构分布的补丁集。LBP-TOP 使用来自相邻平面的面片，而 VLBP 使用三维空间中的相交面片。动态纹理方法使用来自时空图像帧集合的三个相邻片的集合，作为帧 n-2、帧 n-1 和帧 0(当前帧)。](06.html#Fig12)

TPLBP，FPLBP

三片 LBP TPLBP 和四片 LBP FPLBP [244]利用新颖的多片采样模式将稀疏局部结构添加到复合 LBP 描述符中。如[图 4-6](#Fig6) 所示，三补片 LBP 使用由三个补片交替组合而成的一组径向 LBP 模式，而四补片 LBP 使用更大范围内更为分散的补片对。

![9781430259299_Fig04-06.jpg](images/9781430259299_Fig04-06.jpg)

[图 4-6](#_Fig6) 。Wolf 等人开发的新型多补丁集。阿尔[244]。(左)TPLBP 比较环周围三个补丁集合的值，以计算 LBP 代码，总共八个集合，因此每个 LBP 位有一个集合。(右)四补丁 LBP 使用四个补丁来计算比特，使用来自每个环的两个对称分布的补丁来产生 LBP 代码中的每个比特。每个环的半径是一个变量，面片对是一个变量，每个环的面片数是一个变量；这里，每个环有八个补丁

带状和放射状扇形形状

源自特征兴趣点位置或形状质心的辐射状扇形或轮辐可用作描述符采样拓扑——例如，傅立叶形状描述符(如第 6 章中所述；特别参见[图 6-29](06.html#Fig29) 。

d-网条形图案

由 Hundelshausen 和 Sukthankar[135]开发的 D-NETS 方法使用了一种连通图形状的描述符模式，其采样模式可能存在变化。作者建议该方法使用三种不同的模式是有效的，如图[图 4-7](#Fig7) 所示:

1.  兴趣点处的全连通图
2.  兴趣点处的稀疏或迭代连通图
3.  所选网格上的密集采样图

描述符本身由一组 *d-tokens，*组成，这些 d-tokens 是原始像素值的条带，而不是来自修补区域的值:条带是区域，各种方向的线是图案。沿着条带的采样是在条带长度的 80%和 20%之间，而不是整个长度，省略端点，这被声称是为了减少噪声兴趣点的贡献。被采样的点被组合成一组 ***s*** 的均匀像素块，并被归一化和存储到离散的 d-token 描述符中。

![9781430259299_Fig04-07.jpg](images/9781430259299_Fig04-07.jpg)

[图 4-7](#_Fig7) 。D-NETS [135]采样模式的降低分辨率示例。(左)兴趣点的全密集连接。(中心)兴趣点处的稀疏连通性。(右)规则采样网格上的密集连通性。D-NETS 的作者指出，10 像素间距的密集采样网格优于在感兴趣的点进行采样

物体多边形形状

对象和多边形形状方法进行全局和区域扫描，以在整个图像帧或区域中查找形状。目标是找到一个有凝聚力的物体或区域。这里提供了对用于特征描述符的分割多边形形状的基本方法的讨论，包括:

*   形态学对象边界方法
*   纹理或区域结构方法
*   超像素或像素相似性方法
*   深度图分割

[第 6 章](06.html)详细介绍了一系列用于统计描述多边形形状特征的对象形状因子和度量。请注意，这个主题在文献中经常被讨论为“图像时刻”；Flusser 等人[518]是一个很好的信息来源。

形态边界形状

定义多边形形状的一种方法是使用形态学。形态学分割是区域描绘的常用方法，无论是作为二进制对象还是作为灰度对象。形态形状有时被称为*斑点*。在二进制和灰度级的情况下，阈值处理通常被用作定义对象边界的第一步，并且诸如侵蚀和扩张之类的形态整形操作被用于增长、收缩和清理形状边界。形态学分割是阈值和边缘特征驱动的。([第 3 章](03.html)讨论了用于形态学和阈值处理的方法。)

纹理结构形状

区域纹理也用于分割多边形形状。纹理分割是一种常见的用于图像分析和分类的图像处理方法，并且是以非二进制方式进行分割的理想方法。纹理揭示了简单阈值处理忽略的结构。如图[图 6-6](06.html#Fig6) 所示，LBP 算子可以检测局部纹理，纹理可以用来分割天空、水、陆地等区域。纹理分割基于局部图像像素关系。(在[第三章](03.html)中介绍了几种纹理分割方法。)

超像素相似形状

使用超像素方法分割区域是基于将相似像素折叠在一起的思想，例如，将具有相似颜色的像素折叠在一起形成一个更大的形状。目标是将整个图像区域分割成超像素。超像素方法是基于相似性的。(在第 3 章的[中讨论了几种超像素处理方法。)](03.html)

局部二元描述符点对模式

局部二进制描述符形状和采样模式，如 FREAK、BRISK、ORB 和 BRIEF 中使用的那些，是为了理解各种权衡和设计方法而研究的好例子。我们将在这里检查局部二进制形状和模式的概念。([第 6 章](06.html)对每个描述符进行了更详细的介绍。)

局部二进制描述符使用*点对采样方法* ，其中像素对被分配给彼此用于二进制比较。注意，局部二进制描述符和点对比较的缺点是局部区域中图像像素值的微小变化可能表现为*二进制伪像。*一组像素值中看似微不足道的变化可能会在匹配过程中引起问题，这些问题表现为:(1)有噪声的图像，以及(2)具有恒定灰度级的图像。然而，每个本地二进制描述符方法都试图减轻二进制伪像问题。例如，BRISK(见[图 4-10](#Fig10) 后面)和 ORB(见[图 4-11](#Fig11) 后面)计算每个兴趣点周围的*过滤区域*以在二进制比较之前减少噪声成分。

另一种减轻恒定灰度级的二进制伪像问题的方法用于 LBP 方法的修改，称为局部三进制模式算子，或 LTP [522](另见参考文献[173]，第 2.9.3 节)，它使用 *{-1，0，1}* 的*三进制值*来描述区域。为 LTP 建立阈值带，以将近常数灰度值描述为 0，阈值带以上的值描述为 1，阈值带以下的值描述为-1。LTP 可用于描述恒定灰度级的平滑区域和标准 LBP 中的对比区域。此外，可以调整点对的比较阈值，以补偿噪声、光照和对比度，这在几乎所有的局部二进制描述符方法中都采用了。

[图 4-8](#Fig8) (左图)显示了一个假想的描述符模式，包括选定的像素作为黑色值，而中间左侧的图像显示了一个带状的形状和模式，其中描述符沿着一组没有特定对称性的线段计算描述符，如 DNETS [135]方法。

![9781430259299_Fig04-08.jpg](images/9781430259299_Fig04-08.jpg)

[图 4-8](#_Fig8) 。说明各种描述符模式和形状。(左)稀疏。(中间偏左)网或条。(中间偏右)内核。(右)径向辐条

在[图 4-8](#Fig8) 中，中右图像显示了一个卷积核，其中指定了过滤器形状和过滤器目标，而右图像是一个斑点形状，使用径向像素采样线，从形状质心开始，到斑点周界结束。注意，可以从包含从质心到周长的每个径向线段的长度的阵列中计算 1D 傅立叶描述符来描述形状，或者可以只保留原始像素值的阵列，或者可以计算 D 网。

可以通过一起使用一个或多个形状和图案来设计特征描述符。例如[图 4-8](#Fig8) (左图)中假设的描述符图案，一个图案用于靠近兴趣点的像素，另一个图案用于远离中心的像素，捕捉圆形图案信息，另一个图案覆盖几个极值点。调优采样模式的一个很好的例子是 FREAK 描述符，下面将讨论。

畸形视网膜图案

FREAK [130]描述符形状也在第 6 章中有详细讨论，它使用基于人类视网膜系统的局部二进制模式，如图[图 4-9](#Fig9)所示，其中人类视觉系统中受体细胞的密度在中心较大，随着远离中心而减小。在构建本地二进制描述符时，FREAK 遵循类似的模式，称为*粗到细*描述符模式，精细细节位于面片中心，粗糙细节向外移动。由粗到细的方法还允许描述符在由粗到细的段中进行匹配。首先匹配粗略的部分，如果匹配足够好，也匹配精细的特征部分。

![9781430259299_Fig04-09.jpg](images/9781430259299_Fig04-09.jpg)

[图 4-9](#_Fig9) 。(左)人类视觉系统在中央凹区域中的受体浓度，具有较小的受体密度，向外移动到 Para 和 Peri 的外围视觉区域。(中心)FREAK [130]局部二进制模式采样区域，在距离中心的六个重叠距离环的每一个中有六个区域，环的大小表示比较点平均区域。(右)反常型点对模式的假设示例

在这个框架中，可以用几种模式构建畸形描述符。对于 FREAK，实际的模式形状和点对是在训练阶段设计的，在该阶段，使用类似于 ORB [134]的方法学习最佳点对模式，以找到具有高方差的点对。该模式仅受训练数据的约束；仅使用了来自 32×31 图像补片区域的 45 个点对。

如[图 4-9](#Fig9) 所示，比较每个线段末端的点对，使用 16 个字节将比较值集合组成一个二进制描述符向量，描述符集合中包含四个独立的 16 字节由粗到细模式的级联。通常，粗略模式单独有效地拒绝了不良匹配，而更精细的模式仅用于限定最接近的匹配。

轻快的模式

BRISK 描述符[131]点对采样形状是对称的圆形，由排列在四个同心圆环上的共 60 个点组成，如图[图 4-10](#Fig10) 所示。围绕 60 个点中的每一个点的是以蓝色显示的采样区域，采样区域的大小随着距中心的距离而增加，并且与采样点之间的距离成比例。在采样区域内，高斯平滑被应用于像素，并且在平滑区域上计算局部梯度。

![9781430259299_Fig04-10.jpg](images/9781430259299_Fig04-10.jpg)

[图 4-10](#_Fig10) 。(左)轻快的同心采样网格模式。(中间)短线段对。(右)长距离对。请注意，每个选定点的区域(左图)的大小随着距中心的距离而增加，并且二进制比较是从每个高斯采样圆形区域的中心点计算的，而不是从每个单独的中心点计算的。(中间和右边的图片由乔希·格里森[143]许可使用)

像其他本地二进制描述符一样，BRISK 比较成对的点来形成描述符。点对分为两组:(1) *长线段，*与区域梯度一起用于确定描述符的角度和方向，角度用于旋转描述符区域，然后应用成对采样模式；(2) *短片段，*，可以成对比较并组成 512 位二进制描述符向量。

圆球和简短图案

ORB [134]部分基于 BRIEF 描述符[132，133]，因此名字**或**面向 **B** rief ，因为 ORB 向 BRIEF 方法添加了面向，并且还提供了其他改进。例如，ORB 还通过使用 Harris 角点方法限定快速角点来改进兴趣点方法，并使用 Rosin 的方法[61]来改进角点方向，以便操纵 BRIEF 描述符来改进旋转不变性(已知 BRIEF 对旋转敏感)。

ORB 还提供了一个非常好的点对训练方法，这是对 BRIEF 的一个改进。简而言之，如图[图 4-11](#Fig11) 所示，在 31×31 补丁区域内，基于中心点的高斯分布，以随机分布模式指定样本点；选择的采样点数是 256。将选定的样本点对相互比较，以形成二元描述符向量。通过积分图像方法计算每个点的值，以将 5×5 区域平滑成点值。

![9781430259299_Fig04-11.jpg](images/9781430259299_Fig04-11.jpg)

[图 4-11](#_Fig11) 。(左)一个大大降低了点对计数分辨率的圆形图案，使用< 32 个点而不是全部 256 个点。(右)使用随机点对的简单样式模式

为了学习描述符点对采样和比较模式，ORB 使用训练算法来寻找训练集中具有高方差的不相关点，并选择最佳的 256 个点来定义用于创建二进制特征向量的成对采样模式。所以形状和图案是非对称的，如图[图 4-11](#Fig11) 所示，类似于一些 DNETS 图案。ORB 点对模式依赖于训练数据。

注意在[图 4-11](#Fig11) 中，一个简单样式图案(右图)使用随机点对。开发人员提出了几种随机化点对的方法[132]。在[图 4-11](#Fig11) 中显示的圆形图案是基于在一个边界 31×31 图像补片中选择具有高统计方差的点对，其中较小的 5×5 灰度图像补片区域位于所选兴趣点的中心。然后，使用积分图像方法平滑每个 5×5 区域，以产生该点的单个值。

描述符辨别

描述符的区分度如何？所谓的*区分度*是指描述符能够很好地唯一描述和区分其他特征。取决于应用，需要或多或少的辨别，因此有可能*通过提供比有用的更多的信息和不变性来过度描述*特征，或者*通过限制鲁棒性和不变性属性来不足描述*特征。对于一组给定的鲁棒性标准，特征描述符鉴别可能是重要和有趣的，但是在某些情况下，鉴别并不总是要解决的正确问题。

在下面的假设下，可以平衡描述符中增加区分度的需要，有利于使用级联的简单描述符，如相关模板。

1.  **假设廉价的大规模并行计算**，可变形描述符，如 Taylor 和 Rosin 的 RFM2.3 [220]成为更有吸引力的选择，允许使用简单的弱区分相关模板或像素补丁，并使用 GPU 纹理采样器在硅中实时变形，以进行缩放、仿射和单应变换。使用并行 GPU SIMT/SIMD 计算和卷积内核，可以轻松实现各种姿态变化和光照变化下的匹配和对应。因此，GPU 可以有效地允许简单的相关补丁被扭曲和对比度增强，以用作可变形描述符并与目标特征进行比较。
2.  **假设有大量快速而廉价的内存**，例如大型内存缓存系统，许多无差别描述符或训练模式可以存储在内存缓存的数据库中。诸如在神经网络和卷积网络中使用的各种加权方案可以被有效地用来实现期望的一致性和质量。此外，在分类器中可以采用其他提升方案，例如 Adaboost 方法，以从弱区分数据中开发强分类器。

总之，根据目标系统，高鉴别特征描述符和简单弱鉴别特征描述符的级联对于给定的应用可能是正确的选择。

光谱鉴别

特征辨别的一个方面是所选择的用于表示特征的描述符光谱或值。我们将*光谱*简单地称为光谱内或连续谱上的值。仅使用单个光谱的特征描述符(例如强度值的直方图)将对强度分布有鉴别能力，而对其他属性(例如形状或仿射变换)没有鉴别能力。例如，特征描述符可以通过组合诸如 *RGB* 颜色、深度和颜色强度的局部区域梯度的多变量光谱集来提高辨别水平。

众所周知[248]，人类视觉系统在视网膜上以比例和旋转不变的方式辨别和响应梯度信息，如 SIFT 和许多其他特征描述方法所示。因此，梯度的使用是计算机视觉的常见和优选的光谱。

可以在一系列变量上获得光谱，其中简单标量范围的值只是一种类型的光谱:

1.  灰度强度
2.  颜色通道强度
3.  基本功能域(频域、HAAR 等。)
4.  2D 或 3D 渐变
5.  3D 表面法线
6.  形状因子和形态学测量
7.  纹理度量
8.  面积积分
9.  区域的统计矩
10.  来自局部二进制模式的汉明码

上述光谱类型中的每一种，以及可以列举的许多其他光谱类型，可以被包括在多变量特征描述符中，以增加区分度。当然，所选应用的鉴别要求将指导描述符的设计。例如，使用颜色通道光谱识别水果颜色，使用形状因子识别水果形状，使用纹理度量识别皮肤纹理，识别水果的应用程序会更有效。

回答歧视问题的一个方法是查看描述符中包含的信息。描述符是否包含光谱的多元集合，覆盖了多少不变性属性，如方向或尺度？

区域、形状和图案辨别

特征描述符的形状和模式是影响辨别的重要维度。根据应用的不同，每种特征形状都有优点和缺点。令人惊讶的是，甚至单个像素也可以用作特征描述符形状(见[图 1-7](01.html#Fig7) )。让我们看看歧视的其他方面。

形状和图案可分类如下:

1.  单个像素(接下来讨论单个像素描述方法)
2.  一行像素
3.  像素的矩形区域
4.  多边形形状或像素区域
5.  一种或一组不相连的像素，如视网膜中央凹图案

描述符的形状决定了区分的属性。例如，与圆形描述符相比，矩形描述符将受限于旋转不变性属性。此外，描述符的较小形状将范围限制到较小的区域，并且还限制了比例不变性。描述符区域越大，携带的像素就越多，这可以提高分辨率。

其他几位研究人员已经对描述符形状、像素采样模式、采样区域大小和像素度量进行了调查[128–130]。在本节中，我们将更深入、更广泛地探讨用于特性描述符调整的具体方法，特别关注本地二进制特性描述符，它有望实现低功耗和高性能。

几何辨别因素

形状在很大程度上决定了可能的旋转不变性。例如，矩形形状通常在大约 15 度的旋转辨别中开始下降，而圆形图案通常在旋转变化下表现得更好。注意，通过将一个以上的形状或图案结合到描述符向量中，可以增强任何辨别能力差的形状或图案描述符，并使其更有辨别能力。

Viola Jones 方法中使用的 HAAR 小波之类的形状和图案整合了矩形区域中的所有像素，产生了该区域中所有像素的合成值。因此，在描述符中不包含局部细节图案信息，导致非常有限的局部区域辨别和较差的旋转不变性或辨别。

旋转辨别能力差的另一个例子是矩形相关模板方法，该方法逐个像素地比较两个矩形区域。然而，一些有效的描述符方法使用矩形区域。

一般来说，矩形是旋转不变性的一种限制。然而，SURF 使用确定圆形邻域内的矩形 HAAR 小波特征的主导方向的方法来实现更好的旋转不变性。并且 SIFT 使用一种方法，通过在宁滨阶段期间对矩形区域应用圆形加权函数来提高旋转不变性和准确性。

还应当注意，在目标应用中，具有低区分度的描述符被非常有效地使用，例如用于视频编码中的运动估计的相关方法。在这种情况下，矩形形状与编码问题非常匹配，并且有助于高度优化的固定功能硬件实现，因为在矩形区域中可以很好地捕捉帧到帧的运动，并且对于 30 Hz 的帧速率，帧到帧之间通常几乎没有旋转或比例变化，只有平移。

考虑到这一点，描述符鉴别应该*适合*应用程序，因为增加鉴别是以计算和内存为代价的。

特征可视化评估歧视

理解辨别的另一种方式是使用特征描述符本身来仅从描述符信息重建图像，其中我们可以认为描述符的集合是实际图像的压缩或编码版本。图像压缩、编码和特征描述是相关的；参见图 3-18 。接下来，我们研究几个仅从描述符信息重建图像的例子。

基于图像重建的猪判别方法

[图 4-12](#Fig12) 使用 HOG 描述符可视化重建。细节层次是粗略的，并遵循与 HOG 的预期用途相匹配的线和边结构。HOG 提供的辨别的一个关键方面是在计算描述符之前不对图像使用图像平滑。HOG 的研究表明，平滑图像会导致辨别能力的损失*。Dalal 和 Triggs[106]强调了他们避免图像平滑以保留图像细节的故意意图。*

 *![9781430259299_Fig04-12.jpg](images/9781430259299_Fig04-12.jpg)

[图 4-12](#_Fig12) 。通过猪的形象化描述进行辨别。(图片(c)卡尔·沃德里克，经许可使用。)另请参见“HOGgles:可视化物体探测特征，Carl Vondrick，Aditya Khosla，Tomasz Malisiewicz，Antonio Torralba，麻省理工学院，2013 年 ICCV 会议上的口头报告”

然而，一些研究人员认为，在计算局部区域梯度和边缘等值时，噪声会引起问题，并进一步建议在描述符计算之前通过平滑从图像中消除噪声；这是许多圈子里的传统观念。请注意，有许多方法可以过滤噪声，而不需要诉诸极端的高斯型平滑、卷积模糊和积分图像，这些方法会扭曲图像场。

一些较好的噪声过滤方法包括斑点去除过滤器、等级过滤、双边过滤器和许多其他方法，这些方法在第 2 章中讨论过。如果输入图像保持原样，或者至少使用了最好的噪声过滤方法，特征描述符将可能对细粒度特征保留更多的辨别能力。

通过局部二值模式的图像重建进行鉴别

如[图 4-13](#Fig13) 所示，d'Angelo 和 Alahi【127】提供了从 FREAK 和简要的本地二进制描述符重建的图像的可视化。在整个图像上，重建完全从单独的描述符信息中再现。“简短”使用更随机的模式来比较整个区域中的点，而“畸形”使用经过训练的、更中心凹和对称的模式，在靠近区域中心的位置增加细节。d'Angelo 和 Alahi[127]注意到，重建结果类似于原始图像的拉普拉斯滤波版本，这有助于我们理解这些特征的区分似乎在结构上与详细的边缘和梯度信息相关。

![9781430259299_Fig04-13.jpg](images/9781430259299_Fig04-13.jpg)

[图 4-13](#_Fig13) 。使用 512 个点对使用局部二进制描述符重建的图像。(第一行)简介。(中间一排)随机化怪胎(更类似于 BRIEF)。(最下面一行)使用视网膜中央凹图案图像的二元畸形(c)亚历山大·阿拉希，经许可使用

d'Angelo 和 Alahi 重建方法[127]从原始图像上计算的一组重叠描述符补片创建图像。为了重建图像，首先使用新颖的方法重建描述符以呈现小块，然后通过对重叠区域进行平均来合并小块以形成图像，其中小块合并大小可以根据需要而变化。例如，注意[图 4-13](#Fig13) 对左栏中的芭芭拉图像使用 32x32 的补丁，对中间栏中的摄影师使用 64x64 的补丁。还要注意的是，芭芭拉并不像摄影师那样具有同样的辨别力，他的图像包含了更精细的细节。

通过 SIFT 特征的图像重建进行辨别

另一种近似图像重建的方法[105]证明了 SIFT 描述符的辨别能力；参见图 4-14 。本研究的重建方法首先获取一幅包含著名建筑等场景的未知图像，在图像中找到一组 Hessian-affine 区域检测器，提取相关的 SIFT 特征描述符，然后保存 SIFT 描述符周围的一组椭圆图像块区域。

![9781430259299_Fig04-14.jpg](images/9781430259299_Fig04-14.jpg)

[图 4-14](#_Fig14) 。使用从同一物体的多个视图获取的组合 SIFT 描述符对常见场景进行图像重建，图像(c) Herve Jegou，经许可使用

接下来，搜索包含相同场景的相似并且希望匹配的图像的图像数据库，以在 Hessian-affine 兴趣点处找到最接近的匹配 SIFT 描述符。然后，获取每个 SIFT 描述符周围的一组椭圆形碎片区域。基于场景的先验感兴趣区域几何参数，将数据库中找到的椭圆面片扭曲成合成图像。

通过堆叠和混合重叠的补片以及通过平滑插值将补片缝合在一起。任何剩余的洞都通过平滑插值来填充。该方法的一个显著结果是证明了图像可以从来自不同方向的不同图像的一组补片重建，因为特征描述符是相似的；并且在这种情况下，SIFT 描述符的区分被很好地展示。

精确度，可跟踪性

准确性可以用特定的特征属性或鲁棒性标准来衡量；参见[表 4-1](#Tab1) 和[表 7-4](07.html#Tab4) 。一个给定的描述符可能在一个领域优于另一个描述符，而在另一个领域则不然。在研究文献中，每个新特征描述符的准确性和性能通常是以备用方法 SIFT 和 SURF 为基准的。特征描述符的准确性是使用普遍接受的基础事实数据集来测量的，该数据集被设计来测量鲁棒性和不变性属性。(参见[附录 B](10.html) 中关于标准地面真实数据集的调查，以及[第 7 章](07.html)中关于地面真实数据集设计的讨论。)

这里重点介绍了一些有用的精度研究，说明了测量描述符和兴趣点精度的一些方法。例如，Mikolajczyk 和 Schmid[144]对早期特征检测器和描述符的准确性和不变性进行了最全面的调查，涵盖了一系列描述符，包括 GLOH、SIFT、PCA-SIFT、形状上下文、旋转图像、海森拉普拉斯 GLOH、互相关、梯度矩、复数滤波器、差分不变量和可控滤波器。

在 Gauglitz 等人[145]的文章中，有针对缩放、平移、旋转、透视失真、运动模糊、静态照明和动态照明的多种特征度量的不变性度量，包括 Harris、Shi-Tomasi、DoG、Fast Hessian、Fast 和 CenSurE，这些在第 6 章的[中讨论。还有一些分类器的度量，包括随机化的树和蕨类植物，这将在本章后面讨论。](06.html)[图 4-15](#Fig15) 提供了 Gauglitz【145】中特征检测器和兴趣点准确度的一些视觉比较。

![9781430259299_Fig04-15a.jpg](images/9781430259299_Fig04-15a.jpg)

![9781430259299_Fig04-15b.jpg](images/9781430259299_Fig04-15b.jpg)

[图 4-15](#_Fig15) 。各种不变性准则下特征描述符的准确性。(摘自 Gauglitz 等人[145]，图片 Springer Science +Business Media，LLC，经许可使用)

回到最近的本地二进制描述符。艾尔。[130]提供了一组比较，其中 FREAK 在特定数据集和 Mikolajczyk 和 Schmid [144]针对视点、模糊、JPEG 压缩、亮度、旋转和比例等属性开发的一组标准的准确性方面优于 BRISK、SURF 和 SIFT。在 Rublee 等人。艾尔。[120]，ORB 显示出比 SIFT、SURF 和 BRIEF 具有更好的旋转不变性。总之，局部二进制描述符在鲁棒性、准确性和计算效率方面被证明是有吸引力的。

精度优化、子区域重叠、高斯加权和池化

采用各种方法来优化特征描述符的准确性，这里讨论几种方法。例如，描述符经常使用重叠的采样模式子区域，如[图 4-9](#Fig9) 中的异常描述符模式所示。通过重叠采样区域和仔细处理边界，在大多数情况下精确度似乎更好[161，178]。重叠区域直观上是有意义的，因为区域中的每个点都与周围的点相关。对于局部二元模式类型描述符和光谱描述符变体，如 SURF 等[181，144]，特征描述中模式子区域重叠的值似乎是显而易见的。当描述符中使用的采样区域不重叠时，识别率不准确[130]。

高斯加权是另一种提高精度的有效方法，可以减少测量中的噪声和不确定性。例如，SIFT [161，178]描述符将基于高斯的加权因子应用于描述符区域中的每个局部区域梯度，以支持更靠近中心的梯度，并减少更远的梯度的加权。此外，SIFT 加权以圆形对称模式应用，这增加了一些旋转不变性；参见[图 6-17](06.html#Fig17) 。

注意，高斯加权不同于高斯滤波；高斯滤波器既减少了噪声，又消除了图像中的关键细节，但这种滤波在 HOG 方法中被发现是适得其反的[106]。诸如 SIFT 在梯度箱上使用的高斯加权因子可以简单地用于限定数据而不是改变数据。一般来说，加权因子可用于缩放结果并微调检测器或描述符。采样模式中的子区域重叠和高斯加权方案是互补的。

通过将邻近要素组合在一起，而不仅仅是单个要素，可以提高精度。例如，在卷积网络中，几个附近的特征可以被汇集用于联合决策，以通过选择的鲁棒性或不变性标准来增加准确性[347]。汇集概念在文献中也可以称为*邻域一致性*或*半局部约束*，它可以涉及联合约束，例如局部特征组合集之间的角度和距离【348–350】。

亚像素精度

一些描述符和识别方法可以在匹配特征位置时提供亚像素精度[147–151]。计算亚像素精度的常用方法包括互相关、和绝对差、高斯拟合、傅立叶方法、刚体变换和 ICP。一般来说，亚像素精度在流行的商业应用中并不常见，只有工业检测、航空航天和军事系统等高端应用才需要。

例如，SIFT 为关键点的位置提供亚像素精度。数字相关方法和模板匹配是众所周知的，并被用于对象跟踪的工业应用中，并且可以被扩展以计算一个像素偏移区域范围内的相关性，以产生一组相关性，该组相关性可以被拟合到曲线中并被插值以找到最高匹配，从而产生子像素精度。

亚像素精度通常限于平移。旋转和缩放在亚像素精度方面更难以量化。平移的典型亚像素精度结果仅优于像素分辨率，但分辨率精度可以更精细，在一些方法中，使用 FFT 配准方法，平移精度据称高达像素的 1/20<sup>th</sup>[151]。

此外，立体视差方法受益于改进的子像素精度，特别是在长距离下，因为 *Z* 距离测量的粒度随着距离呈指数增加。因此，随着深度场增加，计算的深度场包含更粗糙的信息，并且计算的深度场在 *Z* 中实际上是非线性的。因此，立体和多视图立体视差计算中的子像素精度对于最佳精度来说是非常理想和必要的。

搜索策略和优化

如图[图 5-1](05.html#Fig1) 所示，一个特征可能是稀疏的，覆盖一个局部区域，也可能覆盖一个区域或全局。用于隔离这些特征类型的搜索策略是不同的。对于全局特征，没有搜索策略:整个帧被用作特征。对于区域描述符，需要选择或分割一个区域(在[第 2 章](02.html)中讨论)。对于稀疏的局部特征，搜索策略变得很重要。稀疏局部区域的搜索策略分为以下几个主要类别(也包括在[第 5 章](05.html)的分类中)。

密集搜索

在密集搜索中，检查图像中的每个像素。例如，在每个像素处计算兴趣点，然后将兴趣点限定并分类到候选列表中，并且为每个候选计算特征描述符。局部二进制描述符和通用描述符(如 SIFT)使用密集搜索。

在立体匹配和深度感测中，以密集的方式搜索每个像素来计算视差和最近点。例如，立体算法使用密集的对应搜索来逐行逐像素地计算视差；单目深度传感方法，如 PTAM [327]使用密集搜索兴趣点，然后稀疏搜索预测位置的已知特征。

密集方法也可以应用于图像金字塔，其中通常首先搜索较低分辨率的金字塔，然后搜索较细粒度的金字塔。当特征位置未知且无法预测时，密集方法通常在准确性和稳健性方面更受青睐。

网格搜索

在网格搜索方法中，图像被分成规则的网格或小块，并且基于小块来定位特征。OpenCV 库中提供了一种新颖的网格搜索方法，使用网格搜索适配器(在[第 6 章](06.html)和[附录 A](09.html) 中讨论)。这允许在网格区域内重复试验搜索最佳特征，并具有在每次试运行前调整检测机参数的能力。从精度的角度来看，格网搜索的一个可能的缺点是，要素没有排列成格网，因此要素可能会沿着格网边界被遗漏或截断，从而降低整体的精度和鲁棒性。

网格搜索有多种用途。例如，一个规则的网格被用作 D 网网格拓扑的锚点，如图[图 4-7](#Fig7) 所示。或者，使用网格来形成图像拼贴块，并为每个拼贴块计算描述符，例如在 HOG 方法中，如图[图 4-12](#Fig12) 所示。Viola Jones 方法[146]也在网格上计算 HAAR 特征。

多尺度金字塔搜索

多尺度影像金字塔搜索背后的理念是通过从较低分辨率开始加速搜索，或者真正提供多尺度影像以允许在适当的尺度下找到特征。缩小图像比例的方法包括像素抽取、双线性插值和其他多采样方法。比例空间是创建影像金字塔的常用方法，下一节将讨论许多变体；参见[图 4-16](#Fig16) 。

![9781430259299_Fig04-16.jpg](images/9781430259299_Fig04-16.jpg)

[图 4-16](#_Fig16) 。五个八度音阶的金字塔。这幅图片来自阿尔布雷希特·丢勒 1498 年的启示录木刻。请注意，许多方法使用非八度金字塔标度[120]

然而，随着金字塔等级的增加，检测到的特征的数量迅速减少，特别是对于已经被高斯滤波的尺度空间金字塔，因为高斯滤波器减少了图像纹理细节。此外，在较高的金字塔等级中，开始时会出现较少的像素，因此有时会使用小于八度音阶的金字塔比例间隔。有关图像金字塔的详细讨论，请参见参考文献[160]。

缩放空间和图像金字塔

通常，不是使用简单的像素抽取和像素插值来降低图像比例，而是使用高斯滤波方法来建立最初由 Lindberg[547]提出的*比例空间*【524，523】金字塔表示，以减少缩放伪像并保留斑点状特征。尺度空间是定义多尺度图像集的更正式的方法，通常使用高斯核*与图像 ***f(x，y)***卷积如下:*

 *![image](images/Eqn4-21.jpg)

![image](images/Eqn4-22.jpg)

*或通过等效方法:*

![image](images/Eqn4-23.jpg)

![image](images/Eqn4-24.jpg)

SURF 方法[160]中描述了尺度空间高斯滤波器设计的一个很好的例子。以增加大小的内核实现的高斯滤波器以倍频程间隔的子采样间隔应用于原始图像，以创建尺度空间图像，例如，从 9x9 高斯滤波器开始，增加到 15x15、21x21、27x27、33x33 和 39x39 参见图 4-17 。

![9781430259299_Fig04-17.jpg](images/9781430259299_Fig04-17.jpg)

[图 4-17](#_Fig17) 。以 0，2，4，16，32，64 的比例缩放空间高斯图像。图片来自阿尔布雷特·丢勒的启示录木刻，1498 年

尺度空间的一个缺点是在图像金字塔的较高级别中丢失定位和缺乏准确性。事实上，由于缺乏分辨率和高斯滤波，一些特征在图像金字塔的较高层中完全缺失。有效的尺度空间特征匹配的最佳例子可以是 SIFT，其规定尺度中的第一个<sup>第一个</sup>金字塔图像是原始分辨率的两倍，以减轻尺度空间问题，并且还提供了良好的多尺度描述符框架。参见[图 4-18](#Fig18) 。

![9781430259299_Fig04-18.jpg](images/9781430259299_Fig04-18.jpg)

[图 4-18](#_Fig18) 。规模和空间

图像金字塔类似于计算机图形学中使用的纹理贴图。图像金字塔的变化是常见的。使用倍频程和非倍频程金字塔间距，过滤方法也有变化。例如，SIFT 方法[161，178]使用五级八度音阶 ***n/2*** 图像金字塔，在尺度空间中具有高斯滤波图像。然后，使用高斯差分(DoG)方法捕获金字塔中相邻图像中的兴趣点极值最大值和最小值。SIFT 使用双比例第一金字塔等级，线性插值像素的原始放大倍数为 2 倍，以帮助保留精细细节。这项技术将稳定关键点的数量增加了大约四倍，这是非常显著的。在 ORB [120]方法中，非八度音阶空间是围绕五级金字塔上的音阶建立的，与两倍的八度音阶相比，这在金字塔等级之间具有更接近的分辨率等级。

要素金字塔

尺度空间金字塔和金字塔搜索的替代方法是使用*特征空间金字塔*，并建立一组多尺度特征描述符一起存储在数据库中。在这种方法中，描述符本身包含金字塔，不需要尺度空间或图像金字塔。相反，特征搜索直接从单尺度目标图像到多尺度特征进行。在[第 6 章](06.html)中讨论的 RFM 方法【220】甚至更进一步，包括*对每个描述符的每个补丁的多视角*变换版本。在[表 4-3](#Tab3) 中，注意多尺度特征可用于直接匹配目标图像，而单尺度特征更适合用于图像金字塔。

[表 4-3](#_Tab3) 。使用单尺度特征和多尺度特征的一些权衡

![image](images/Table4-3.jpg)

[图 3-16](03.html#Fig16) 显示了*多分辨率直方图*【152】的相关概念，从尺度空间金字塔的图像区域创建，直方图连接在描述符中，用于确定特征匹配的纹理度量。所以在多尺度直方图方法中，运行时不需要金字塔图像集；相反，金字塔搜索使用来自描述符本身的直方图特征来寻找与单尺度目标图像的对应。

各种标量和其他度量可以组成多尺度特征金字塔，例如图像强度片、颜色通道强度片、梯度幅度和梯度方向。已经发现纹理特征的直方图作为更广泛的特征描述符的一部分作为仿射不变度量是有用的[152]。

稀疏预测搜索和跟踪

在稀疏预测搜索流水线中，在下一帧的预期位置搜索在先前帧中发现的已知位置的特定特征。例如，在用于单目深度感测的 PTAM [327]算法中，通过定位一组兴趣点和特征描述符，从来自单个相机的连续视频帧创建稀疏 3D 点云和相机姿态。对于每个新帧，使用先前的相机姿态矩阵，由新图像中相同的兴趣点和特征检测器可能在的坐标构成*预测*。然后，对于新的帧，开始搜索或跟踪循环，以使用金字塔粗到细搜索策略来定位预测兴趣点的少量*个*。在预测的兴趣点和特征周围的范围内搜索预测的兴趣点和特征，并且基于发现特征的新坐标更新相机姿态矩阵。然后，使用更新的相机姿态预测更大数量的点*并且在该组中更精细比例的金字塔图像上进入搜索和跟踪循环。这个过程反复寻找点并改进姿态矩阵。*

跟踪区域限制搜索

区域限制搜索的一个例子是视频会议系统，该系统使用立体声麦克风跟踪发言者的位置，以通过三角测量计算粗略位置。一旦知道了粗略的扬声器位置，就移动摄像机来观察扬声器，并且对于进一步的精细定位调整、自动缩放、自动聚焦和自动对比度增强来说，只有面部区域是感兴趣的。在这种应用中，不需要为面部特征搜索或处理整个图像。相反，FOV 的中心是搜索局限于定位面部的区域。例如，如果图像是从具有 1920×1080 分辨率的 HD 相机拍摄的，则仅需要处理图像中心的有限区域，可能是 512×512 像素，以定位面部特征。

分段有限搜索

分割区域可以定义搜索区域，例如具有特定纹理的区域，或者特定颜色强度的像素。在形态学视觉流水线中，可以以各种方式分割区域，例如阈值处理和二进制腐蚀+膨胀来创建二进制形状。然后，二进制形状可以用作掩模，以分割掩模下的相应灰度图像区域，用于特征搜索。图像分割方法在第 2 章的[中介绍。](02.html)

深度或 *Z* 有限搜索

随着低成本商用深度传感器出现在移动消费设备上， *Z* 维度可用于限制搜索范围。参见[图 4-19](#Fig19) 。例如，通过使用深度分割出图像的背景，前景特征更容易被分割和识别，并且搜索可以被深度段限制。考虑到计算机视觉从 2D 图像中提取 3D 图像信息需要花费多少时间，我们可以期待深度相机以新的方式用于简化计算机视觉算法。

![9781430259299_Fig04-19.jpg](images/9781430259299_Fig04-19.jpg)

[图 4-19](#_Fig19) 。基于深度图的图像区域分割。来自 Middlebury 数据集的深度图像:(来源:D. Scharstein 和 C. Pal“为立体声学习条件随机场”CVPR 会议，2007。作者提供)

计算机视觉、模型、组织

这一部分包含了对所选示例的高级概述，以说明如何在计算机视觉系统中使用特征度量。在这里，我们探索了特征是如何被选择、学习、关联在一起以描述真实对象、分类以进行有效的搜索和匹配以及在计算机视觉流水线中使用的。本节介绍机器学习，但仅在高层次上使用选定的示例。Prince 在[546]中找到了关于机器学习的很好的参考。Szelinski [324]为计算机视觉模型、组织、应用和算法提供了很好的参考。

本节选择并定义了几个术语来讨论计算机视觉模型，即*特征空间*、*物体模型*和*约束*。本节的主要主题包括:

*   特征空间和最佳特征的选择
*   经由包含特征和约束的对象模型的对象识别
*   优化模式匹配的分类和聚类方法
*   培训和学习

![image](images/sq.jpg) **注**计算机视觉研究期刊和课程中讨论的很多方法都是从其他切线领域借用并应用的，例如，机器学习和统计分析。在某些情况下，计算机视觉正在推动这类切线领域的研究。由于这些领域已经建立并被认为超出了本研究的范围，我们在此仅提供一个简短的主题介绍，并提供完整性参考[546，324]。

特征空间

描述对象所需的所有特征、属性和其他信息的集合和组织可以被称为*特征空间*。在训练或学习阶段，通常使用基本事实数据作为训练集，将特征组织和分类到特征空间中。所选特征在数据库或一组数据结构(例如树和列表)中被组织和结构化，以允许在运行时进行快速搜索和特征匹配。

特征空间可以包含一种或多种类型的*描述符*，其使用诸如直方图、二元模式向量的谱作为多元复合描述符。此外，特征空间包含用于将多组特征关联在一起以识别对象和对象类别的*约束*。特征空间对于任何给定的应用程序都是唯一的，并且是根据所使用的特征类型和应用程序的要求来构建的；没有标准的方法。

特征空间可以包含几个用于描述对象的*参数*；例如:

*   **几种类型的特征描述符**，如 SIFT 和简单颜色直方图。
*   **相对于训练图像的每个描述符的笛卡尔坐标**。
*   **每个描述符的方位**。
*   **与每个描述符相关联的训练图像的名称**。
*   **多模态信息**，如 GPS、温度、海拔、加速度。
*   **特征集**或相关描述符列表。
*   **一组描述符之间的约束**，例如彼此之间的相对距离、相对距离阈值、描述符之间的角度关系或者相对于参考点的角度关系。
*   **对象模型**收集并关联每个对象的参数。
*   类别或同类物体的组合，如汽车。
*   **对象或约束的标签**。

对象模型

*对象模型*使用来自特征空间的参数描述真实对象或对象类别。例如，对象可能包含描述特定汽车所需的所有参数，如特征描述符集、标签和约束。一类对象可以关联和标记同一类的所有对象，例如任何类型的汽车。没有标准或规范的对象模型可以遵循，因此在本节中，我们将描述计算机视觉对象的总体属性以及如何对它们进行建模。

对象模型可以由多组单独的特征组成；对相关特征的约束，例如目标模型中特征的位置或方向；以及可能用于对象或描述符的其他多模态信息，例如 GPS 信息或时间戳，如图 4-20 中的[所示。可以使用监督和非监督学习方法的组合来创建对象模型[403]；我们将在本章后面介绍几种方法。](#Fig20)

![9781430259299_Fig04-20.jpg](images/9781430259299_Fig04-20.jpg)

[图 4-20](#_Fig20) 。简化的假设特征空间，显示特征、约束和对象的组织和关联

制定对象模型的一个早期尝试被称为*基于部件的模型，*由 Fischler 和 Elschlager 在 1973 年提出[530]。这些通过首先识别它们的部分来描述和识别更大的物体——例如，由眼睛、鼻子和嘴等部分组成的脸。基于零件的模型有几种变体；例如，参见参考文献[531–533]。机器学习方法也用于创建对象模型[546]，并在本节稍后讨论。

一个简单的对象模型可以仅由整个图像的图像直方图、每个相关图像的名称或标签以及可能的一些分类参数(例如图像的主题、GPS 位置和日期)组成。为了识别未知的目标图像，获取目标图像的直方图，并与来自数据库的图像直方图进行比较。使用合适的距离度量(例如 SAD)来测量一致性。在这个简单的例子中，强力搜索或散列表索引可以用于对照目标图像直方图检查数据库中的每个直方图，并且可能来自对象模型的其他参数可以与直方图一起匹配，例如 GPS 坐标。不需要进行复杂的机器学习分类、聚类、数据缩减或数据库组织，因为搜索方法是蛮力的。然而，随着更多的图像被添加到数据库中，寻找对应将变得越来越慢。并且直方图本身没有很强的辨别能力，并且提供很少的不变性。

约束条件

对象识别的关键，*约束*用于将特征和相关属性关联和限定为对象。在没有附加限定的情况下，单独的特征可能不足以识别对象，包括*邻域一致性*或*半局部约束*，涉及联合约束，例如局部特征组合集之间的角度和距离【348–350】。约束将对象模型元素关联在一起以描述和识别更大的对象[365，366，379]，例如通过确保一起找到对象特征的适当子集所需的最小特征计数阈值，或者通过使用诸如 GPS 位置的多模态数据约束，或者通过投票。

由于创建约束有许多方法，我们只能说明这个概念。例如，Lowe[161]展示了识别示例，说明如何使用 SIFT 特征来识别包含数十个不同特征的对象，在某些情况下，仅使用两个或三个良好特征。如果不能找到描述对象的一些特征，考虑特征方向和比例作为约束，这允许透视和遮挡不变性。另一个例子是宽基线立体匹配，其需要在 L/R 图像中的特征对上的位置和距离约束，假设 L/R 特征对的尺度和方向大约相等；在这种情况下，平移将被限制在基于深度的范围内。

检测器和功能的选择

基于变量的组合来选择特征检测器，例如特征检测器*设计方法*以及所需的不变性和性能的类型。接下来讨论几种方法或设计方法。

手动设计的特征检测器

一些特征检测器，例如多边形形状描述符和稀疏局部特征(如 SURF ),是使用专业人员的直觉、经验和测试结果手动设计和选择的，以解决应用程序所需的不变性属性。这包括选择正确的光谱来描述特征，确定特征的形状和模式，以及选择要搜索的区域类型。然而，有些检测器是根据统计和经验设计的，我们将在下一章讨论。

统计设计的特征检测器

统计方法用于设计和创建特征检测器。例如，在 ORB 和 FREAK 等方法中使用的二进制采样模式是基于可能的兴趣点比较对的统计特征从训练数据集创建的。通常，ORB 对每个检测到的兴趣点特征对组合进行排序，以找到与高方差不相关的术语。这是一个统计分类或训练过程，用于设计特征模式，并针对特定的基本事实数据集对其进行调整。更多关于 ORB 的细节见[图 4-11](#Fig11) ，也见本章前面关于 FREAK 和 ORB 的讨论。

SIFT 还使用统计方法从训练集中确定最佳兴趣点、每个兴趣点的主导方向以及每个兴趣点的规模。

学到的功能

许多系统学习唯一的特征码本，使用稀疏编码方法在训练阶段对照选择的基本事实数据识别唯一的一组基本特征。所学习的基本特征特定于应用领域或训练数据，并且所选择的检测器和描述符可以仅仅是用作相关性模板的像素区域。然而，可以使用任何描述符，例如 SIFT。神经网络和卷积网络方法普遍用于特征学习，以及稀疏编码方法，这将在本章稍后讨论。

培训概述

机器视觉系统被*训练*识别期望的特征、物体和活动。然而，训练可能是相当复杂的，并且在机器学习和统计分析领域中被很好地覆盖(我们不详细地覆盖)。训练可以在专家的监督和帮助下进行，也可以在无人监督的情况下进行，如本节稍后讨论的深度学习方法。这里，我们提供了通用步骤的概述，并提供了更多详细信息的参考。训练的一个最简单的例子是获取与每种类型的图像相关联的图像直方图，例如，从不同图像中获取的描述人脸、动物或汽车的一组直方图。

训练包括收集适用于应用领域的图像训练集，然后确定可以调整哪些检测器和描述符以产生最佳结果。在一些情况下，特征描述符本身可以是可训练的并且被设计成匹配训练数据，例如局部二进制模式描述符 ORB、BRIEF 和 FREAK，它们可以使用从训练数据优化和学习的可变像素采样模式。

在特征学习系统中，整个特征集是从训练集中学习的。特征学习方法采用一系列描述符方法，例如包含像素区域的简单相关寺庙，或 SIFT 描述符。通过仅保留与已经在集合中的特征显著不同的特征，减少了学习的特征集合。特征学习方法将在本章后面介绍。

为了在训练期间形成更大的对象，使用约束将特征集合关联在一起，例如几何关系，如特征之间的角度或距离，或者特定区域内给定值的特征计数。对象是在训练期间确定的，这涉及针对所选的基本事实数据运行检测器和描述符以找到特征，然后确定将对象表示为复合特征集的约束。可以通过跟踪特征及其在相邻帧中的位置来识别活动，因此可以将活动视为一种元对象，并将其存储在数据库中。

在任何情况下，通过训练阶段获得的特征被*分类*到一个可搜索的特征空间，使用广泛的统计和机器学习方法。培训、分类和学习将在本章后面的高级部分讨论。

特征和对象的分类

分类是识别的另一个术语，它包括特征空间组织和训练。*分类器*是描述从数据中学习结构并识别对象的方法或系统的术语。自动构建分类器有几种方法，包括支持向量机(SVM)、核机器和神经网络。

一般来说，训练集或基础事实数据集的大小是分类器准确性的关键[336–338]。在系统训练期间，首先使用具有基础真实数据的训练集来建立分类器。机器学习社区提供了大量的培训指导，所以我们遵从已有的资源。深入挖掘机器学习和地面真实数据测试的关键期刊包括 NIPS 和 IEEE PAMI，后者可以追溯到 1979 年。机器学习和统计方法用于在训练期间指导特征的选择、分类和组织。如果没有对特征空间进行分类，则特征匹配过程遵循相对于已知特征的新特征的缓慢强力线性搜索。

本节讨论的主要分类问题包括:

*   **相似特征的分组距离和聚类**使用一系列最近邻方法来帮助组织、拟合、误差最小化、搜索和匹配，并启用相似性约束，如几何邻近、角度关系和多模态线索。
*   **降维**避免过度拟合，清理数据以去除离群值和虚假数据，并减少数据库的大小。
*   **提升和加权**增加特征匹配的准确性。
*   **约束**描述组成对象的描述符之间的关系，例如姿态估计器和阈值接受/拒绝过滤器。
*   **构建数据库**用于快速匹配和强力方法。

组距离:聚类、训练和统计学习

在本讨论中，我们将*组距离*和*聚类*称为描述数据原子组之间的相似性和差异的方法，有时可以互换，例如特征描述符。组距离和聚类的应用包括误差最小化、回归、异常值去除、分类、训练和特征匹配。

根据 Estivill-Castro[351]，*聚类*不可能在数学意义上定义，因为有如此多不同的方法和途径来描述一个聚类。相关方法汇总见[表 4-3](#Tab3) 。然而，我们将在计算机视觉的背景下讨论聚类，以解决数据组织、模式匹配和描述对象模型约束(同时试图不冒犯使用不同术语的数学纯粹主义者)。

为了识别一个群体中的相似特征，使用了多种聚类算法或群体距离算法[353]，在一些文献中也称为*误差最小化*和*回归方法*。特征被聚集在一起，用于计算机视觉，以帮助解决基本问题，包括对象建模、在匹配过程中寻找相似的模式、组织和分类相似的数据以及维数减少。

描述聚类的一种方式是通过*相似性—* 例如，在某种距离度量或回归方法下描述相关特征的聚类。在这个意义上，聚类与距离函数重叠:欧几里得距离用于位置，余弦距离用于方向，汉明距离用于二进制特征向量比较就是例子。然而，两点之间的距离函数在本讨论中不同于组距离函数、聚类和组分布。

在特征空间中有效地组织相似的数据用于搜索和分类是聚类的一种形式。它可以基于特征向量的相似性或距离度量，或者基于对象约束相似性，并且需要加速特征搜索和匹配。然而，商业数据库“和强力搜索”可以按原样用于特征描述符，而不试图进行优化。自定义数据结构可以通过树、金字塔、列表和哈希表进行优化。(我们建议读者参考计算机科学中的标准参考资料，包括数据组织和搜索；参见经典文本*唐纳德·克努特的《计算机编程的艺术》*或阿霍、乌尔曼和霍普克罗夫特的《数据结构和算法》。)

聚类的另一个方面是特征空间维度和拓扑。由于一些特征空间是多元和多维的，包含标量和张量，因此很难对聚类、误差最小化、回归或距离进行任何严格的定义；这实际上取决于相似性被测量的空间。

群体距离:聚类方法调查，KNN，RANSAC，K-Means，GMM，SVM，其他

可以选择一系列备选方案来聚类和学习数据原子组之间的相似性，从低端开始，使用基本的 C 库搜索和排序功能，并使用统计和机器学习方法(如核机器和支持向量机(SVMs ))达到高端，以构建完整的分类器。核机器允许将各种相似性函数代入一个公共框架，以简化相似性方法和分类的比较。

表 4-4 总结了所选的聚类方法，并为感兴趣的读者提供了一些关键参考。

[表 4-4](#_Tab4) 。聚类、分类和机器学习方法

| 

组距离标准

 | 

方法和参考

 | 

描述

 |
| --- | --- | --- |
| 距离 | k-最近邻[364] | 使用选择的距离函数，基于到训练集中 k 个最近邻的简单距离进行聚类。 |
| 共识模型 | RANSAC [380]散文 C [363] Levenberg-Marquardt [401] | 使用随机样本一致性来估计污染数据集中的模型参数。 |
| 质心模型 | K-均值[354]，Voroni 镶嵌，Delauney 三角剖分分层 K-均值，Nister 树[387] | 使用分布的质心作为聚类的基础，这对于大型数据集来说可能非常慢；可以使用词汇(Nister 方法)在分层树结构中制定，以获得更好的性能。 |
| 集群的连通性 | 分层聚类[355] | 在其他集群之间建立连接。 |
| 密度模型 | DBSCAN [395][352]光学[396] | 定位与周围数据相比具有最大和最小密度的分布。 |
| 分销模式 | 高斯混合模型[356] | 求模型参数最大似然的迭代方法。 |
| 神经方法 | 神经网络[360] | 神经方法无视单一的定义，但通常使用一个或多个输入；可以学习和训练的每个输入的自适应权重因子、作用于输入和权重的神经函数、神经函数的偏差因子；产生一个或多个输出。 |
| 贝叶斯定理的 | 天真的贝叶斯[383]随机树[384]蕨类植物[307] | 记录变量之间概率关系的学习模型。 |
| 概率、语义 | [232]潜在语义分析(pLSA)潜在狄利克雷分配(LDA)隐马尔可夫模型，HMM [385][386] | 基于变量间概率关系的学习模型。 |
| 内核方法，内核机器 | 内核机器[361] <sup>1</sup> 各种内核[362] PCA [357][358] *SVM 是一个众所周知的内核机器实例。 | 将分布简化为欧几里得空间中一组不相关的、排序的主成分，以便于匹配和聚类。 |
| 支持向量机 | SVM[377359] | SVM 可以产生结构化或多元输出来对输入进行分类。 |

<sup>*1*</sup>`http://www.kernel-machines.org/`

分类框架，缰绳，轻便摩托车

培训和分类分为以下几大类:

*   **监督。**在训练过程中，会有人协助确保结果正确。
*   **无人监管。**可以从特征数据和参数中自动训练分类器【403】。

将所有的部分放在一起，我们看到训练分类器可以是手动的或自动的，简单的或复杂的，这取决于对象的复杂性和所使用的特征度量的范围。

SVM 或内核机器可能是理想的解决方案，或者问题可能更简单。例如，用于识别水果的机器视觉系统可以包含用于每种类型水果的分类器，其特征包括简单的颜色直方图、形状因子(例如面积和周长以及傅立叶描述符)以及表面纹理度量，并具有关联和量化每种类型水果的所有特征的约束。训练过程包括对每种类型的几片水果进行成像；开发颜色、形状和表面纹理的规范描述符；设计一个顶级的分类器，可能首先辨别颜色，然后辨别表面纹理，最后辨别形状。一个更简单的水果分类器可能只包含每个水果对象的一组精确颜色测量的图像直方图，并且如果在工厂中用高精度彩色相机对每个水果块进行成像，可能足够好地工作。

虽然大多数已发表的研究都是基于为特定应用或展示研究结果而设计的各种非标准分类方法，但一些工作正在朝着更标准化的分类框架进行。

为机器人导航和物体识别开发的潜在标准分类器框架的一个值得注意的例子是 REIN 方法【397】，它允许混合和匹配检测器、描述符和分类器来确定约束。REIN 提供了一个插件架构和接口，允许任何算法(如 OpenCV 检测器和描述符)在并行或串行流水线中组合。REIN 中有两种分类方法可以作为插件模块并行使用:*二值化梯度网格金字塔*作为新方法引入【397】，还使用了*视点特征直方图*【398】。

REIN 流水线为(1) *注意力操作符*提供接口，以识别感兴趣的 3D 点并减少搜索空间；(2) *检测器*，用于创建特征描述符；以及(3) *姿态估计器*，用于确定诸如抓取之类的机器人运动的应用的几何约束。REIN 作为开放源码可用于研究；参见参考文献[397]。

另一个研究项目，MOPED【399】，为机器人导航提供了一个规则的架构，包括物体和姿态识别。轻便摩托车包括优化使用所有可用的 CPU 和 GPU 并行计算资源。轻便摩托车为 GPGPU 提供了 SIFT 和 SURF 的优化版本，并大量使用 SSE 指令进行姿态估计。

内核机器

在机器学习中，*内核机器* [362]是一个框架，它允许一组用于对模式或特征进行统计聚类、排序、关联和分类的方法实现自动化。内核机器的一个常见例子是支持向量机(SVM) [341]。

内核机器的框架将描述符数据映射到特征空间，其中特征空间中的每个坐标对应于一个描述符。在特征空间内，可以使用*核函数*有效地进行特征匹配和特征空间缩减。在内核机器框架中使用了各种内核函数，包括 RBF 内核、Fisher 内核、各种多项式内核和图形内核。

一旦特征描述符被转换到特征空间，就可以采用比较、归约和聚类。内核机器的主要优点是内核方法是可互换的，允许针对相同的特征数据评估许多不同的内核。有一个活跃的内核机器社区(见*kernel-machines.org*)。

增压、加权

*Boosting*【381】是一个机器学习概念，它允许一组分类器一起使用，组织成组合网络、流水线或级联，并将学习到的权重应用于每个分类器。这导致使用组合的加权分类器的更高的协同预测和识别能力。升压类似于用于神经网络输入的加权因子；然而，boosting 方法更进一步，将分类器网络结合起来，创建一个单一的强分类器。

我们将说明 Viola Jones 方法[146，186]中的 boosting，该方法也在第 6 章中讨论，它使用 ADA-BOOST 训练方法，通过从许多弱学习器生成强分类器来创建级联模式匹配和分类网络。这是通过在训练阶段确定的动态加权因子来完成的，使用加权因子的方法称为*增强*。

boosting 的想法是首先对检测到的特征(在这种情况下是 HAAR 小波)进行相等的加权，然后将检测到的特征与预期的特征集进行匹配；例如，为特定面部检测的那些特征。每组加权特征是一个分类器。未能正确匹配的分类器称为*弱学习器。*在训练阶段，对于每个弱学习者，新的加权因子被应用于每个特征，以使分类器正确匹配。最后，所有弱学习器被线性组合成一个*级联分类器*，它就像一个弱分类器的流水线或漏斗，被设计成在流水线早期拒绝坏的特征。

培训可能需要数小时、数天或数周时间，并且需要一些监督。虽然 ADA-BOOST 解决了二元分类问题，但该方法可以扩展到多类分类[382]。

分类的一些例子

我们在这里列出了一些值得注意和流行的分类方法，它们也列在[表 4-5](#Tab5) 中。

[表 4-5](#_Tab5) 。各种兴趣点、描述符和分类器概念的比较

![image](images/Table4-5.jpg)

*Note: The FERNS method does not rely on a local feature descriptor, and instead relies on a classifier using constraints between interest points.*

*随机化树* 是一种使用基于贝叶斯概率方法的分层斑块分类器[384]的方法，采用一组由随机单应性参数变形的简单斑块特征。Ozuysal 等人【307】进一步开发了随机化树方法，使用非层级组织形式的*蕨类、*进行优化，使用二进制概率测试确定斑块分类器成员。使用朴素贝叶斯方法评估匹配。

FERNS training【307】涉及组合来自每个面片的多个视点的训练数据，以添加比例和透视不变性，使用具有 11 个级别的树和每个面片的 11 个版本，使用随机化仿射变形参数进行扭曲；一些高斯噪声和平滑也被应用到变形的片上。然后在每个变形片中定位关键点，并为训练集选择在变形最严重的片中找到的关键点。FERNS 关键点在三个尺度上使用拉普拉斯滤波器的最大值，并且仅保留最强的 400 个关键点。拉普拉斯关键点不包括方向或精细尺度估计。FERNS 不使用描述符，只使用在每组 11 个变形图像上计算的最强拉普拉斯关键点。

虽然 K-means [354]方法可能非常慢，但使用分层 Nister 树[387]进行优化是一种高度可扩展的替代方法，可用于索引分层词汇表树中大量量化或聚类的局部描述符。据报道，该方法具有很强的区分性，并且已经在大型数据集上进行了测试。

二进制直方图交集最小化(BHIM)【322】使用多尺度局部二进制模式(MSLBP)【322】对，以基于 ms LBP 特征对之间的强散度来形成成对耦合的分类器。MSLBP 要素对的直方图相交使用距离函数(如 SAD)来查找直方图距离的最大散度。然后，BHIM 分类器由具有大散度的 MSLBP 直方图“对”的列表组成，并且 MSL BP 被匹配到分类器中。BHIM 使用跨多种规模的训练数据创建的特征。据作者报道，它至少与 ADA-BOOST 一样准确，并且据报道，MSLBP 特征比 LBP 更具鉴别性。

Alahi 等人[391]开发了一种使用级联的一组由粗到细的区域描述符网格进行分类和匹配的方法，这些区域描述符称为*对象描述符* (ODs)。目标应用程序通过一组摄像机跟踪对象，例如大都市地区的交通摄像机。每个 OD 是在多尺度网格上的等尺寸区域中计算的多尺度描述符的集合；网格的范围超过六个刻度，刻度因子相差 25%。任何现有的描述符方法都可以用于 od 方法，例如 SIFT、SURF 或相关模板。作者[391]声称，与使用现有描述符相比，在 OD 中级联描述符可以提高性能。

特征学习，稀疏编码，卷积网络

特征学习方法创建一组基本特征(我们在这里不严格地使用术语*基本特征*),这些基本特征在训练阶段从地面真实数据中导出。基本特征被收集到一个集合中。本节讨论了创建集合的几种相关方法。

术语:代码簿、视觉词汇、词汇包、功能包

在特征学习文献中使用了几个相关的方法和术语，包括诸如*稀疏编码*、*码本*、*单词包*和*视觉词汇*的变体。然而，对于新手来说，在各种方法中存在一些概念上的重叠，并且术语是微妙的，描述了用于学习特征和构建分类网络的方法中的微小变化；参见参考文献[114–119]。稀疏码类似于基本特征。活动识别领域的许多研究人员[69，75]正在使用稀疏码书并扩展研究领域。

我们描述了一些术语和概念，包括:

*   字典、代码簿、视觉词汇、单词包、特征包和特征字母表，包含特征集。
*   稀疏编码、稀疏编码和最小特征或编码集。
*   多层稀疏编码和深度信念网络，包含用于分层匹配的多层分类网络；这些要素由小比例、中比例和大比例要素组成-可能有十层或更多层的比例。
*   单层稀疏编码，没有特征层次，可以建立在多尺度描述符如 SIFT 之上。
*   无监督特征学习，包括从地面真实数据集学习给定应用的最佳特征的各种方法；特征学习最近在神经信息处理系统(NIPS)社区中受到了很多关注，尤其是在应用于卷积网络时。

稀疏编码

在自然图像的稀疏编码领域中的一些早期工作可以在 Olshausen 和 Field [126]的工作中找到，其形成了概念基础。为了创建*稀疏码本*，首先选择图像特征域，例如人脸识别或汽车识别。然后，选择一组*基项*(面片、向量或函数)，并基于选择的唯一性函数将其放入码本。稀疏编码的目标是包含实现系统的准确性和性能目标所需的唯一基本项的最小集合。

当在训练阶段向码本添加新特征时，使用合适的距离函数和经验阈值，将候选特征与码本中已经存在的特征进行比较，以确定特征唯一性。如果该特征足够独特，如通过距离函数和阈值所测量的，则新特征被添加到码本中。

在 Bo、Ren 和 Fox[124]的工作中，训练阶段包括使用诸如杯子之类的物体，将杯子放置在一个小的旋转桌上。从多个视点和距离拍摄对象的多个图像，以实现透视不变性，然后产生从各种姿态拍摄的一组补片，从这些补片创建唯一稀疏码字并将其添加到码本。另见参考文献[124，237，225，226]。相关工作包括稀疏码描述符或 HSC [125]的直方图，如第 7 章所述，用于改进 HOG 描述符。

视觉词汇

视觉词汇类似于文字词汇，它们共享共同的研究[231]。在文档分析领域，基于文档中唯一字数的直方图来分析和描述内容。当然，直方图可以被修剪和重新映射，以减少量化和宁滨。视觉词汇遵循与单词词汇方法相同的方法，通过视觉单词的频率来全局地表示图像，如图[图 4-21](#Fig21) 所示，其中视觉单词方法使用多种类型的特征描述符。

![9781430259299_Fig04-21.jpg](images/9781430259299_Fig04-21.jpg)

[图 4-21](#_Fig21) 。代表一组视觉单词的假设性简化插图，以及显示给定图像中每个视觉单词使用频率的直方图

为了建立视觉词汇，从地面真实图像中提取和收集独特的特征描述符。要被包括在词汇表中，新特征必须与词汇表中的现有特征具有显著的统计差异，因此只有当特征超过差异阈值函数时，它们才被添加到词汇表中。

为了量化视觉词汇特征以确定它们的唯一性，对特征集执行聚类和分类方法，并且选择唯一的候选特征，以便减少特征空间并有助于匹配速度。可以采用各种统计方法来减少特征空间，例如 K 均值、KNN、SVM、贝叶斯等。

为了收集视觉特征，从业者使用所有可能的特征描述和图像搜索方法，包括在规则网格和兴趣点对图像进行采样，以及尺度空间搜索。词汇表中使用的特征范围从简单的矩形像素区域到 SIFT 特征，以及介于两者之间的一切。视觉词汇的应用范围从分析活动识别的时空图像[232，235]到图像分类[233，234，118，116，235]。

通过卷积滤波器掩码学习检测器

如[图 4-22](#Fig22) 所示，Richardson 和 Olson【122】开发了一种学习最佳卷积滤波器的方法，作为应用于立体视觉里程计的兴趣点检测器。这种方法使用 DCT 和 HAAR 基特征的组合，使用随机权重形成一组候选的 8×8 像素基函数，每个基函数都根据类似于 2D 条形码的目标特征集进行测试，称为 AprilTags [527]。针对 AprilTags 测量每个 8×8 像素候选，以找到每个 tag 的最佳卷积掩模，从而形成基集。当然，其他目标特征(如角点)也可用于地面真实数据，而不是 AprilTags。

![9781430259299_Fig04-22.jpg](images/9781430259299_Fig04-22.jpg)

[图 4-22](#_Fig22) 。(左)用于办公室、会议室、隔间和大厅的图像的最佳学习卷积滤波器；灰度值表示滤波器系数的大小。(右)顶行中的可比角检测器，左下方的高斯差分，以及作者喜欢的自定义过滤器。(图片为安德鲁·理查森和埃德温·奥尔森，经许可使用)

使用学习的卷积模板，特征检测的步骤如下:(1)在选择的像素处卷积每个模板以获得响应；(2)将卷积响应与阈值进行比较；(3)使用 3×3 空间滤波器窗口抑制非极值响应值。作者报告了在快速检测器数量级上的良好准确性和高性能，但是随着特征计数的增加，组合检测和非最大抑制阶段具有更高性能的好处。

卷积神经网络，神经网络

卷积神经网络，由 le Cun【339】等人首创，是一种基于神经网络理论【360】实现机器学习算法的方法。卷积网络在图像分类和特征匹配方面在学术界和工业界取得了巨大成功[340]。

卷积神经网络是模拟神经网络的一种方法。卷积网络中的主要计算元素是许多并行优化卷积，以及计算单元之间的快速本地内存。运行时分类性能可以非常快，特别是对于硬件优化的实施[528]。

如[图 4-23](#Fig23) 所示，一种对每个神经元和神经元网络建模的方法包括一组输入、一组应用于每个输入的加权因子、一个组合函数和一个输出。存在许多映射到卷积网络的神经模型，我们请读者参考专家，参见 Lecun [339]。使用几种模型设计了神经网络，但是这个主题超出了本工作的范围[360]；更多信息请参见 NIPS 社区研究。

![9781430259299_Fig04-23.jpg](images/9781430259299_Fig04-23.jpg)

[图 4-23](#_Fig23) 。(左)来自人脑的神经元。(右)人工神经网络的许多可能模型之一[360]。注意，每个神经元可以具有几个输入、几个输出、一个偏置因子和输入/输出权重因子(未示出)。左边的人类神经元图像@ Gerry Shaw，经许可使用

神经网络是多层次的*、*，包含若干层和互连。如[图 4-23](#Fig23) 中的假设神经网络所示，一个偏差输入作为一个加权因子被提供给每个神经功能。一些神经网络配置使用应用于每个单独输入的单独权重，因此权重因子充当卷积核系数。就卷积网络而言，神经网络范例可以被映射到原始像素的局部小块中，作为最低级别的特征输入。例如，小块尺寸可以是 1 像素或 5×5 像素小块，每个输入具有卷积加权因子。

在网络中确定学习的加权因子[85，339]，以用作应用于块中每个像素的卷积核值。层的输出被称为*特征图*。加权因子在网络中学习，并且可以反向传播以在训练期间调整系统。

Lecun [339]提供了卷积网络的标准介绍。在学习过程中，一个关键目标是只保留唯一的特征并减少特征空间；为此，使用稀疏编码。在包含 10 个或更多标度层的*深度学习*方法【339，340】中，学习到的特征被组合成分级的高级、中级和低级特征的多层结构。网络和像素输入区域可以重叠到相邻的卷积核中。

深度学习、池化、可训练的特征层次

局部特征描述符通常与特定尺度或者甚至几个尺度的匹配有关。然而，正在开发可训练的特征层次方法[402，339],其使用层次或特征的*深度集、*对特征进行分类，所述层次或特征包含精细尺度的低级特征、中间或中等尺度的特征和粗糙尺度的高级特征——可能在特征检测层次中有八层或更多层——产生更深的表示，这是深度学习 AI 方法的目标[525]。

深度学习方法可能包括几层神经网络，包括隐藏层。为了减少层级的每一级的特征空间，在每一级使用特征学习来汇集[404]相似的局部特征，仅保留独特的特征。各种特征预处理方法被用于汇集，例如特征白化[405]，以将特征归一化为在对比或变化下相似。低级特征可以包括局部区域像素细节，高级特征可以类似于区域形状度量。这种可训练的特征分类网络在文献中以许多名称进行了讨论，例如深度信念网络[526]和特征学习。

许多研究人员正在建立依赖于矩形像素块的特征的深度信任网络，并使用卷积或相关的特征匹配方法。使用深度学习的卷积网络被部署在许多成功的商业应用中，如语音识别，或人脸，人和性别识别。它们也被用来赢得一些比赛[340]。据报道，随着特征的分辨率朝着更精细的尺度降低，使用深度学习的卷积网络的准确性增加，这增加了网络的深度。据报道，训练需要几天时间[340]，使用一组专用的 GPU。

一个有趣的例子是 Bo、Ren 和 Fox [242]的工作，其中采用分层匹配追踪 HMP 方法(深度方法)在无监督框架中学习特征，并添加到具有两个级别的稀疏码本。RGB-D 数据通道用于计算描述符，包括用于灰度或强度、 *RBG* 颜色、 *Z* 或来自深度相机的深度的单独描述符，以及来自深度数据的 3D 表面法线。使用了一些不同的描述符大小，包括用于较高级匹配的 4 像素重叠采样的 16×16 面片，以及用于较低级别的一组不重叠的 5×5 面片。这些特征作为特征学习过程的一部分被汇集在一起。

摘要

在这一章中，我们回顾了用于创建局部特征描述符和兴趣点检测器的背景概念和思想。关键概念和想法也发展成了第 5 章中建议的愿景分类法。这里讨论了距离函数，以及有用的坐标系统。我们研究了局部描述符的形状和模式，重点是局部二进制描述符，如 ORB、FREAK 和 BRISK，以说明概念。

使用仅来自特征描述符数据的图像重建来说明特征描述符辨别。讨论了搜索策略，如尺度空间金字塔和多级搜索，以及其他方法，如网格限制搜索。涵盖了计算机视觉系统模型，包括特征空间、对象模型、特征约束、统计设计特征和特征学习等概念。使用几种方法来说明分类和训练，包括核心机器、卷积网络和深度学习。为感兴趣的读者提供了几篇参考文献，以便更深入地挖掘。还提供了设计视觉系统的实际观察和考虑。

总之，本章提供了一些有用的背景概念，在阅读第 6 章中的局部特征描述符时要记住，因为这里讨论的概念主要来自当前使用的局部描述符方法；然而，本章也提出了一些额外的观察和未来研究的方向。**